
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3. 승촌보 데이터 분석: 계절별 방류량과 클로로필-a의 인과관계 &#8212; 데이터 리포지토리</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css?v=ca93fcec" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'scb_seasonal_flow_chla';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. 승촌보 데이터 분석: 방류량 중요도" href="scb_seasonal_flow_chla_GB.html" />
    <link rel="prev" title="2. 바이오차 메타 데이터: PDP 분석" href="meta_pdp.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
  
    <p class="title logo__title">데이터 리포지토리</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">메타 분석</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="meta_stats.html">1. 바이오차 메타 데이터: 기초 통계</a></li>
<li class="toctree-l1"><a class="reference internal" href="meta_pdp.html">2. 바이오차 메타 데이터: PDP 분석</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">승촌보</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">3. 승촌보 데이터 분석: 계절별 방류량과 클로로필-a의 인과관계</a></li>
<li class="toctree-l1"><a class="reference internal" href="scb_seasonal_flow_chla_GB.html">4. 승촌보 데이터 분석: 방류량 중요도</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/codingalzi/dRepos/blob/master/jupyter-book/scb_seasonal_flow_chla.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/codingalzi/dRepos" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/codingalzi/dRepos/issues/new?title=Issue%20on%20page%20%2Fscb_seasonal_flow_chla.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/scb_seasonal_flow_chla.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>승촌보 데이터 분석: 계절별 방류량과 클로로필-a의 인과관계</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">3.1. 데이터 정보</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">3.2. 주요 내용</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">3.3. 필수 모듈 임포트</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">3.4. 승촌보 데이터 불러오기</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">3.4.1. 수질 데이터 불러오기</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">3.4.2. 승촌보 유량 데이터 추가</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">3.4.3. 연도별 유량 데이터 통합</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">3.4.4. 수질/유량 데이터 합병</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">3.4.5. 이상치 제거</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">3.5. 데이터셋 전처리</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">3.5.1. 1시간 단위로 정리된 데이터를 1일 단위로 변경</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">3.6. 호소수 클로로필-a 수질환경기준에 따른 방류량과 수온의 변화</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">3.6.1. 클로로필-a 농도 기준에 따른 특성들의 변화</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">3.6.2. 수온, 방류량, 클로로필-a 의 관계</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">3.7. 계절별 방류량에 따른 클로로필-a의 변화</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">3.7.1. 계절별 변화</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">3.8. 수온과 방류량에 따른 클로로필-a 수치 변화</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">3.8.1. 계절별 그래프와 수온별 그래프 비교</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="a">
<h1><span class="section-number">3. </span>승촌보 데이터 분석: 계절별 방류량과 클로로필-a의 인과관계<a class="headerlink" href="#a" title="Link to this heading">#</a></h1>
<section id="id1">
<h2><span class="section-number">3.1. </span>데이터 정보<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>승촌보 수질 데이터(Seungchonbo.xlsx)</p>
<ul>
<li><p>2012-2022년</p></li>
<li><p>시간 단위 수집 데이터</p></li>
</ul>
</li>
<li><p>승촌보 유량 데이터(Seungchonbo_flow.xlsx)</p>
<ul>
<li><p>2012-2022년</p></li>
<li><p>10분 단위 수집 데이터</p></li>
</ul>
</li>
</ul>
</section>
<section id="id2">
<h2><span class="section-number">3.2. </span>주요 내용<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>단지 하룻동안이 아닌 2, 3일 동안의 평균 방류량이 클로로필-a의 농도에 결정적인 영향을 미친다.</p></li>
<li><p>계절에 따른 적절한 방류량을 데이터 분석을 통해 알아낸다.</p></li>
<li><p>데이터 분석을 위해 어떠한 종류의 머신러닝 모델 또는 통계 기법을 사용하지 않는다.</p></li>
</ul>
</section>
<section id="id3">
<h2><span class="section-number">3.3. </span>필수 모듈 임포트<a class="headerlink" href="#id3" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># numpy와 판다스</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># 시작화 모듈</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="c1"># 시간 모듈</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="nn">dt</span>
</pre></div>
</div>
</div>
</div>
<p><strong>데이터프레임 설정</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="c1"># 모든 특성이 잘리지 않도록 함.</span>
<span class="c1"># pd.set_option(&#39;display.max_rows&#39;, None)    # 모든 데이터가 다 보이도록 함.</span>
</pre></div>
</div>
</div>
</div>
<p><strong>훈련 모델 준비</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">GridSearchCV</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestRegressor</span><span class="p">,</span> <span class="n">GradientBoostingRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span>

<span class="c1"># 모델 저장</span>
<span class="kn">import</span> <span class="nn">joblib</span>
</pre></div>
</div>
</div>
</div>
<p><strong>그래프 설정</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># seaborn 스타일 지정</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>
<span class="c1"># sns.set_style(&quot;white&quot;)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;figure&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>  <span class="c1"># 그래프 기본 크기 지정</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;font&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>            <span class="c1"># 폰트 크기</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>        <span class="c1"># 축 두께</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;axes&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>      <span class="c1"># 축 색상</span>

<span class="c1"># show tick marks</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;xtick.bottom&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;ytick.left&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># Set the default font</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.family&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Times New Roman&#39;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.serif&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Times New Roman&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p><strong>그래프 한글 설정</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># # 운영체제에 따른 한글 지원을 설정한다. 지원되는 환경은 윈도우, 우분투, 구글 코랩 등이다.</span>

<span class="c1"># import platform</span>
<span class="c1"># plt.rc(&#39;figure&#39;, figsize=(10, 6))  # 그림 크기 설정</span>
<span class="c1"># if platform.system() == &#39;Windows&#39;: # 윈도우</span>
<span class="c1">#     from matplotlib import font_manager, rc</span>
<span class="c1">#     font_path = &quot;C:/Windows/Fonts/NGULIM.TTF&quot;</span>
<span class="c1">#     font = font_manager.FontProperties(fname=font_path).get_name()</span>
<span class="c1">#     rc(&#39;font&#39;, family=font)</span>
<span class="c1"># elif platform.system() == &#39;Linux&#39;: # 우분투 또는 구글 코랩</span>
<span class="c1">#     # !sudo apt-get install -y fonts-nanum*</span>
<span class="c1">#     # !fc-cache -fv</span>
    
<span class="c1">#     applyfont = &quot;NanumBarunGothic&quot;</span>
<span class="c1">#     import matplotlib.font_manager as fm</span>
<span class="c1">#     if not any(map(lambda ft: ft.name == applyfont, fm.fontManager.ttflist)):</span>
<span class="c1">#         fm.fontManager.addfont(&quot;/usr/share/fonts/truetype/nanum/NanumBarunGothic.ttf&quot;)</span>
<span class="c1">#     plt.rc(&quot;font&quot;, family=applyfont)</span>
<span class="c1">#     plt.rc(&quot;axes&quot;, unicode_minus=False)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>이미지 저장 함수</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">IMAGES_PATH</span> <span class="o">=</span> <span class="n">Path</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;images&quot;</span> 
<span class="n">IMAGES_PATH</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">save_fig</span><span class="p">(</span><span class="n">fig_id</span><span class="p">,</span> <span class="n">tight_layout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fig_extension</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">IMAGES_PATH</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">fig_id</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">fig_extension</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">tight_layout</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">fig_extension</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">resolution</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="id4">
<h2><span class="section-number">3.4. </span>승촌보 데이터 불러오기<a class="headerlink" href="#id4" title="Link to this heading">#</a></h2>
<section id="id5">
<h3><span class="section-number">3.4.1. </span>수질 데이터 불러오기<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<p><strong>보 이름</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">weir</span> <span class="o">=</span> <span class="s1">&#39;Seungchonbo&#39;</span>
</pre></div>
</div>
</div>
</div>
<p><strong>데이터 저장소</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">base_path</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/codingalzi/water-data/raw/master/weirs/data/&quot;</span>
</pre></div>
</div>
</div>
</div>
<p><strong>시간 단위로 측정된 승촌보 연도별 수질 데이터 불러오기</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">'측정일/월'</span></code> 특성은 date time으로 파싱.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ! pip install openpyxl</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># &#39;측정일/월&#39; 특성은 date time으로 파싱.</span>
<span class="c1"># 반환값은 연도별 데이터프레임으로 구성된 사전. 2012년 ~ 2022년</span>

<span class="n">data_file</span> <span class="o">=</span> <span class="n">weir</span><span class="o">+</span><span class="s2">&quot;.xlsx&quot;</span>
<span class="n">scb_yearly</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">base_path</span><span class="o">+</span><span class="n">data_file</span><span class="p">,</span> 
                            <span class="n">skiprows</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
                            <span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
                            <span class="n">sheet_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">na_values</span><span class="o">=</span><span class="s1">&#39;ND&#39;</span><span class="p">,</span>
                            <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># 측정일/월 특성을 date time으로 파싱</span>
</pre></div>
</div>
</div>
</div>
<p><strong>2012년도 데이터를 제외한 모든 데이터 통합 함수</strong></p>
<p>2012년도 데이터는 결측치가 너무 많음.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2013년도 데이터부터 합침</span>
<span class="c1"># 반환값은 데이터프레임</span>

<span class="k">def</span> <span class="nf">concat_yearly_df</span><span class="p">(</span><span class="n">df_yearly_dict</span><span class="p">):</span>
    <span class="n">df_concat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">df_yearly_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">1</span><span class="p">:]:</span>
        <span class="n">df_concat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_concat</span><span class="p">,</span> <span class="n">df_yearly_dict</span><span class="p">[</span><span class="n">year</span><span class="p">]])</span>

    <span class="k">return</span> <span class="n">df_concat</span>
</pre></div>
</div>
</div>
</div>
<p><strong>연도별 수질 데이터 통합</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2013년도부터 통합</span>
<span class="n">scb_yearly_df13</span> <span class="o">=</span> <span class="n">concat_yearly_df</span><span class="p">(</span><span class="n">scb_yearly</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_yearly_df13</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>측정일/월</th>
      <th>측정소명</th>
      <th>수온 ℃</th>
      <th>수소이온농도</th>
      <th>전기전도도 μS/cm</th>
      <th>용존산소 mg/L</th>
      <th>총유기탄소 mg/L</th>
      <th>총질소 mg/L</th>
      <th>총인 mg/L</th>
      <th>클로로필-a mg/㎥</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2013-01-01 00:00:00</td>
      <td>용봉</td>
      <td>3.9</td>
      <td>6.9</td>
      <td>374.0</td>
      <td>11.4</td>
      <td>2.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>7.2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2013-01-01 01:00:00</td>
      <td>용봉</td>
      <td>3.9</td>
      <td>6.9</td>
      <td>375.0</td>
      <td>11.4</td>
      <td>2.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.9</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2013-01-01 02:00:00</td>
      <td>용봉</td>
      <td>4.0</td>
      <td>6.9</td>
      <td>374.0</td>
      <td>11.4</td>
      <td>2.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.8</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2013-01-01 03:00:00</td>
      <td>용봉</td>
      <td>4.1</td>
      <td>6.9</td>
      <td>375.0</td>
      <td>11.4</td>
      <td>2.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.9</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2013-01-01 04:00:00</td>
      <td>용봉</td>
      <td>4.0</td>
      <td>6.9</td>
      <td>380.0</td>
      <td>11.3</td>
      <td>2.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.9</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>3427</th>
      <td>2022-05-23 19:00:00</td>
      <td>용봉</td>
      <td>26.6</td>
      <td>6.9</td>
      <td>419.0</td>
      <td>NaN</td>
      <td>6.7</td>
      <td>5.825</td>
      <td>0.108</td>
      <td>66.2</td>
    </tr>
    <tr>
      <th>3428</th>
      <td>2022-05-23 20:00:00</td>
      <td>용봉</td>
      <td>26.3</td>
      <td>6.8</td>
      <td>425.0</td>
      <td>NaN</td>
      <td>6.5</td>
      <td>5.803</td>
      <td>0.107</td>
      <td>61.2</td>
    </tr>
    <tr>
      <th>3429</th>
      <td>2022-05-23 21:00:00</td>
      <td>용봉</td>
      <td>25.9</td>
      <td>6.8</td>
      <td>417.0</td>
      <td>NaN</td>
      <td>6.7</td>
      <td>5.909</td>
      <td>0.107</td>
      <td>58.3</td>
    </tr>
    <tr>
      <th>3430</th>
      <td>2022-05-23 22:00:00</td>
      <td>용봉</td>
      <td>25.7</td>
      <td>6.8</td>
      <td>420.0</td>
      <td>NaN</td>
      <td>6.4</td>
      <td>5.921</td>
      <td>0.106</td>
      <td>54.4</td>
    </tr>
    <tr>
      <th>3431</th>
      <td>2022-05-23 23:00:00</td>
      <td>용봉</td>
      <td>25.5</td>
      <td>6.8</td>
      <td>411.0</td>
      <td>NaN</td>
      <td>6.4</td>
      <td>5.818</td>
      <td>0.106</td>
      <td>52.3</td>
    </tr>
  </tbody>
</table>
<p>82257 rows × 10 columns</p>
</div></div></div>
</div>
<p><strong>인덱스 지정 및 이름 수정</strong></p>
<p>인덱스를 <code class="docutils literal notranslate"><span class="pre">'측정일/월'</span></code> 특성으로 변경한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_yearly_df13</span> <span class="o">=</span> <span class="n">scb_yearly_df13</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;측정일/월&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>인덱스의 이름도 변경한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_yearly_df13</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;DateTime&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>인덱스(<code class="docutils literal notranslate"><span class="pre">'DateTime'</span></code>) 기준으로 정렬한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_yearly_df13</span> <span class="o">=</span> <span class="n">scb_yearly_df13</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_yearly_df13</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>측정소명</th>
      <th>수온 ℃</th>
      <th>수소이온농도</th>
      <th>전기전도도 μS/cm</th>
      <th>용존산소 mg/L</th>
      <th>총유기탄소 mg/L</th>
      <th>총질소 mg/L</th>
      <th>총인 mg/L</th>
      <th>클로로필-a mg/㎥</th>
    </tr>
    <tr>
      <th>DateTime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01 00:00:00</th>
      <td>용봉</td>
      <td>3.9</td>
      <td>6.9</td>
      <td>374.0</td>
      <td>11.4</td>
      <td>2.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>7.2</td>
    </tr>
    <tr>
      <th>2013-01-01 01:00:00</th>
      <td>용봉</td>
      <td>3.9</td>
      <td>6.9</td>
      <td>375.0</td>
      <td>11.4</td>
      <td>2.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.9</td>
    </tr>
    <tr>
      <th>2013-01-01 02:00:00</th>
      <td>용봉</td>
      <td>4.0</td>
      <td>6.9</td>
      <td>374.0</td>
      <td>11.4</td>
      <td>2.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.8</td>
    </tr>
    <tr>
      <th>2013-01-01 03:00:00</th>
      <td>용봉</td>
      <td>4.1</td>
      <td>6.9</td>
      <td>375.0</td>
      <td>11.4</td>
      <td>2.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.9</td>
    </tr>
    <tr>
      <th>2013-01-01 04:00:00</th>
      <td>용봉</td>
      <td>4.0</td>
      <td>6.9</td>
      <td>380.0</td>
      <td>11.3</td>
      <td>2.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.9</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2022-05-23 19:00:00</th>
      <td>용봉</td>
      <td>26.6</td>
      <td>6.9</td>
      <td>419.0</td>
      <td>NaN</td>
      <td>6.7</td>
      <td>5.825</td>
      <td>0.108</td>
      <td>66.2</td>
    </tr>
    <tr>
      <th>2022-05-23 20:00:00</th>
      <td>용봉</td>
      <td>26.3</td>
      <td>6.8</td>
      <td>425.0</td>
      <td>NaN</td>
      <td>6.5</td>
      <td>5.803</td>
      <td>0.107</td>
      <td>61.2</td>
    </tr>
    <tr>
      <th>2022-05-23 21:00:00</th>
      <td>용봉</td>
      <td>25.9</td>
      <td>6.8</td>
      <td>417.0</td>
      <td>NaN</td>
      <td>6.7</td>
      <td>5.909</td>
      <td>0.107</td>
      <td>58.3</td>
    </tr>
    <tr>
      <th>2022-05-23 22:00:00</th>
      <td>용봉</td>
      <td>25.7</td>
      <td>6.8</td>
      <td>420.0</td>
      <td>NaN</td>
      <td>6.4</td>
      <td>5.921</td>
      <td>0.106</td>
      <td>54.4</td>
    </tr>
    <tr>
      <th>2022-05-23 23:00:00</th>
      <td>용봉</td>
      <td>25.5</td>
      <td>6.8</td>
      <td>411.0</td>
      <td>NaN</td>
      <td>6.4</td>
      <td>5.818</td>
      <td>0.106</td>
      <td>52.3</td>
    </tr>
  </tbody>
</table>
<p>82257 rows × 9 columns</p>
</div></div></div>
</div>
</section>
<section id="id6">
<h3><span class="section-number">3.4.2. </span>승촌보 유량 데이터 추가<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">시간</span></code> 특성은 date time으로 파싱해서 불러온다.</p>
<p><strong>10분 단위로 측정된 승촌보 연도별 유량 데이터 불러오기</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># `시간` 특성은 date time으로 파싱해서 불러온다.</span>
<span class="c1"># 반환값은 연도별 데이터프레임으로 구성된 사전. 2012년 ~ 2022년</span>

<span class="n">flow_data_file</span> <span class="o">=</span> <span class="n">weir</span> <span class="o">+</span> <span class="s2">&quot;_flow.xlsx&quot;</span>
<span class="n">scb_flow_yearly</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">base_path</span><span class="o">+</span><span class="n">flow_data_file</span><span class="p">,</span> 
                            <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
                            <span class="n">sheet_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">na_values</span><span class="o">=</span><span class="s1">&#39;ND&#39;</span><span class="p">,</span>
                            <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># 시간 특성을 date time으로 파싱</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="id7">
<h3><span class="section-number">3.4.3. </span>연도별 유량 데이터 통합<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<p>수질 데이터셋과 맞추기 위해 2012년도 데이터를 제외한 데이터를 통합한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2013년부터 통합</span>
<span class="n">scb_flow_yearly_df</span> <span class="o">=</span> <span class="n">concat_yearly_df</span><span class="p">(</span><span class="n">scb_flow_yearly</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_flow_yearly_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>시간</th>
      <th>상류수위(EL.m)</th>
      <th>하류수위(EL.m)</th>
      <th>유입량(㎥/s)</th>
      <th>방류량(㎥/s)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2013-01-01 00:00:00</td>
      <td>7.50</td>
      <td>3.77</td>
      <td>19.82</td>
      <td>19.74</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2013-01-01 00:10:00</td>
      <td>7.50</td>
      <td>3.77</td>
      <td>19.78</td>
      <td>19.76</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2013-01-01 00:20:00</td>
      <td>7.50</td>
      <td>3.77</td>
      <td>19.77</td>
      <td>19.82</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2013-01-01 00:30:00</td>
      <td>7.50</td>
      <td>3.77</td>
      <td>19.77</td>
      <td>19.73</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2013-01-01 00:40:00</td>
      <td>7.50</td>
      <td>3.77</td>
      <td>19.78</td>
      <td>19.79</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>32947</th>
      <td>2022-08-17 19:10:00</td>
      <td>5.46</td>
      <td>1.60</td>
      <td>14.01</td>
      <td>19.78</td>
    </tr>
    <tr>
      <th>32948</th>
      <td>2022-08-17 19:20:00</td>
      <td>5.47</td>
      <td>1.59</td>
      <td>18.96</td>
      <td>19.78</td>
    </tr>
    <tr>
      <th>32949</th>
      <td>2022-08-17 19:30:00</td>
      <td>5.47</td>
      <td>1.58</td>
      <td>19.78</td>
      <td>19.78</td>
    </tr>
    <tr>
      <th>32950</th>
      <td>2022-08-17 19:40:00</td>
      <td>5.47</td>
      <td>1.57</td>
      <td>24.72</td>
      <td>19.78</td>
    </tr>
    <tr>
      <th>32951</th>
      <td>2022-08-17 19:50:00</td>
      <td>5.47</td>
      <td>1.56</td>
      <td>19.78</td>
      <td>19.78</td>
    </tr>
  </tbody>
</table>
<p>505981 rows × 5 columns</p>
</div></div></div>
</div>
<p>인덱스를 시간으로 지정</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_flow_yearly_df</span> <span class="o">=</span> <span class="n">scb_flow_yearly_df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;시간&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>인덱스 이름도 수질 데이터와의 통합을 위해 동일한 이름으로 변경한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_flow_yearly_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;DateTime&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>시간 기준으로 정렬</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_flow_yearly_df</span> <span class="o">=</span> <span class="n">scb_flow_yearly_df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_flow_yearly_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>상류수위(EL.m)</th>
      <th>하류수위(EL.m)</th>
      <th>유입량(㎥/s)</th>
      <th>방류량(㎥/s)</th>
    </tr>
    <tr>
      <th>DateTime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01 00:00:00</th>
      <td>7.50</td>
      <td>3.77</td>
      <td>19.82</td>
      <td>19.74</td>
    </tr>
    <tr>
      <th>2013-01-01 00:10:00</th>
      <td>7.50</td>
      <td>3.77</td>
      <td>19.78</td>
      <td>19.76</td>
    </tr>
    <tr>
      <th>2013-01-01 00:20:00</th>
      <td>7.50</td>
      <td>3.77</td>
      <td>19.77</td>
      <td>19.82</td>
    </tr>
    <tr>
      <th>2013-01-01 00:30:00</th>
      <td>7.50</td>
      <td>3.77</td>
      <td>19.77</td>
      <td>19.73</td>
    </tr>
    <tr>
      <th>2013-01-01 00:40:00</th>
      <td>7.50</td>
      <td>3.77</td>
      <td>19.78</td>
      <td>19.79</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2022-08-17 19:10:00</th>
      <td>5.46</td>
      <td>1.60</td>
      <td>14.01</td>
      <td>19.78</td>
    </tr>
    <tr>
      <th>2022-08-17 19:20:00</th>
      <td>5.47</td>
      <td>1.59</td>
      <td>18.96</td>
      <td>19.78</td>
    </tr>
    <tr>
      <th>2022-08-17 19:30:00</th>
      <td>5.47</td>
      <td>1.58</td>
      <td>19.78</td>
      <td>19.78</td>
    </tr>
    <tr>
      <th>2022-08-17 19:40:00</th>
      <td>5.47</td>
      <td>1.57</td>
      <td>24.72</td>
      <td>19.78</td>
    </tr>
    <tr>
      <th>2022-08-17 19:50:00</th>
      <td>5.47</td>
      <td>1.56</td>
      <td>19.78</td>
      <td>19.78</td>
    </tr>
  </tbody>
</table>
<p>505981 rows × 4 columns</p>
</div></div></div>
</div>
<p><strong>10분 단위를 1시간 단위로 변경</strong></p>
<p>수질 데이터와의 통합을 위해 시간별 평균값을 활용한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_flow_yearly_hour_df</span> <span class="o">=</span> <span class="n">scb_flow_yearly_df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;H&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_flow_yearly_hour_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>상류수위(EL.m)</th>
      <th>하류수위(EL.m)</th>
      <th>유입량(㎥/s)</th>
      <th>방류량(㎥/s)</th>
    </tr>
    <tr>
      <th>DateTime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01 00:00:00</th>
      <td>7.500000</td>
      <td>3.770000</td>
      <td>19.773333</td>
      <td>19.748333</td>
    </tr>
    <tr>
      <th>2013-01-01 01:00:00</th>
      <td>7.500000</td>
      <td>3.770000</td>
      <td>19.701667</td>
      <td>19.706667</td>
    </tr>
    <tr>
      <th>2013-01-01 02:00:00</th>
      <td>7.500000</td>
      <td>3.770000</td>
      <td>19.748333</td>
      <td>19.723333</td>
    </tr>
    <tr>
      <th>2013-01-01 03:00:00</th>
      <td>7.500000</td>
      <td>3.770000</td>
      <td>19.613333</td>
      <td>19.610000</td>
    </tr>
    <tr>
      <th>2013-01-01 04:00:00</th>
      <td>7.500000</td>
      <td>3.770000</td>
      <td>19.661667</td>
      <td>19.665000</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2022-08-17 15:00:00</th>
      <td>5.536667</td>
      <td>1.618333</td>
      <td>29.261667</td>
      <td>25.190000</td>
    </tr>
    <tr>
      <th>2022-08-17 16:00:00</th>
      <td>5.525000</td>
      <td>1.638333</td>
      <td>23.243333</td>
      <td>38.923333</td>
    </tr>
    <tr>
      <th>2022-08-17 17:00:00</th>
      <td>5.483333</td>
      <td>1.626667</td>
      <td>29.068333</td>
      <td>44.878333</td>
    </tr>
    <tr>
      <th>2022-08-17 18:00:00</th>
      <td>5.470000</td>
      <td>1.566667</td>
      <td>19.131667</td>
      <td>14.925000</td>
    </tr>
    <tr>
      <th>2022-08-17 19:00:00</th>
      <td>5.468333</td>
      <td>1.581667</td>
      <td>18.811667</td>
      <td>19.368333</td>
    </tr>
  </tbody>
</table>
<p>84380 rows × 4 columns</p>
</div></div></div>
</div>
</section>
<section id="id8">
<h3><span class="section-number">3.4.4. </span>수질/유량 데이터 합병<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<p>수질 데이터와 유량 데이터를 <code class="docutils literal notranslate"><span class="pre">date/time</span></code> 기준으로 합병한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># `pd.merge()`에서 `how = &#39;inner&#39;` 키워드 인자 : 두 데이터에 공통으로 사용된 시간 데이터만 추가(교집합).</span>
<span class="n">scb_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">scb_yearly_df13</span><span class="p">,</span> <span class="n">scb_flow_yearly_hour_df</span><span class="p">,</span> <span class="n">left_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 유량 특성 이름에 공백이 사용되었기에 특성명에 공백 제거</span>
<span class="n">scb_data</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">scb_data</span><span class="o">.</span><span class="n">columns</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_data</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
DatetimeIndex: 82257 entries, 2013-01-01 00:00:00 to 2022-05-23 23:00:00
Data columns (total 13 columns):
 #   Column       Non-Null Count  Dtype  
---  ------       --------------  -----  
 0   측정소명         82257 non-null  object 
 1   수온 ℃         64574 non-null  float64
 2   수소이온농도       64561 non-null  float64
 3   전기전도도 μS/cm  64524 non-null  float64
 4   용존산소 mg/L    62656 non-null  float64
 5   총유기탄소 mg/L   58675 non-null  float64
 6   총질소 mg/L     59981 non-null  float64
 7   총인 mg/L      58997 non-null  float64
 8   클로로필-a mg/㎥  62876 non-null  float64
 9   상류수위(EL.m)   82231 non-null  float64
 10  하류수위(EL.m)   82231 non-null  float64
 11  유입량(㎥/s)     82231 non-null  float64
 12  방류량(㎥/s)     82231 non-null  float64
dtypes: float64(12), object(1)
memory usage: 8.8+ MB
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_data</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>수온 ℃</th>
      <th>수소이온농도</th>
      <th>전기전도도 μS/cm</th>
      <th>용존산소 mg/L</th>
      <th>총유기탄소 mg/L</th>
      <th>총질소 mg/L</th>
      <th>총인 mg/L</th>
      <th>클로로필-a mg/㎥</th>
      <th>상류수위(EL.m)</th>
      <th>하류수위(EL.m)</th>
      <th>유입량(㎥/s)</th>
      <th>방류량(㎥/s)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>64574.000000</td>
      <td>64561.000000</td>
      <td>64524.000000</td>
      <td>62656.000000</td>
      <td>58675.000000</td>
      <td>59981.000000</td>
      <td>58997.000000</td>
      <td>62876.000000</td>
      <td>82231.000000</td>
      <td>82231.000000</td>
      <td>82231.000000</td>
      <td>82231.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>17.309103</td>
      <td>7.032307</td>
      <td>344.310877</td>
      <td>7.500954</td>
      <td>4.341878</td>
      <td>5.358875</td>
      <td>0.118273</td>
      <td>50.969729</td>
      <td>6.451908</td>
      <td>2.465385</td>
      <td>32.146464</td>
      <td>31.964258</td>
    </tr>
    <tr>
      <th>std</th>
      <td>8.099525</td>
      <td>0.509260</td>
      <td>88.450084</td>
      <td>3.914830</td>
      <td>1.032926</td>
      <td>1.963933</td>
      <td>0.062979</td>
      <td>37.409147</td>
      <td>1.528813</td>
      <td>1.183083</td>
      <td>113.291730</td>
      <td>112.716473</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.800000</td>
      <td>6.100000</td>
      <td>92.000000</td>
      <td>0.500000</td>
      <td>1.600000</td>
      <td>0.706000</td>
      <td>0.003000</td>
      <td>1.000000</td>
      <td>2.600000</td>
      <td>-0.756667</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>9.400000</td>
      <td>6.700000</td>
      <td>280.000000</td>
      <td>4.400000</td>
      <td>3.600000</td>
      <td>3.820000</td>
      <td>0.074000</td>
      <td>20.975000</td>
      <td>5.570000</td>
      <td>1.538333</td>
      <td>11.320000</td>
      <td>11.133333</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>17.300000</td>
      <td>6.900000</td>
      <td>344.000000</td>
      <td>7.600000</td>
      <td>4.200000</td>
      <td>5.097000</td>
      <td>0.106000</td>
      <td>43.200000</td>
      <td>7.290000</td>
      <td>2.546667</td>
      <td>16.280000</td>
      <td>15.108333</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>24.700000</td>
      <td>7.100000</td>
      <td>415.000000</td>
      <td>10.400000</td>
      <td>5.000000</td>
      <td>6.660000</td>
      <td>0.148000</td>
      <td>74.100000</td>
      <td>7.520000</td>
      <td>3.550000</td>
      <td>25.570000</td>
      <td>26.649167</td>
    </tr>
    <tr>
      <th>max</th>
      <td>36.100000</td>
      <td>10.000000</td>
      <td>730.000000</td>
      <td>24.300000</td>
      <td>19.300000</td>
      <td>12.357000</td>
      <td>0.745000</td>
      <td>453.500000</td>
      <td>157.920000</td>
      <td>12.486667</td>
      <td>4581.450000</td>
      <td>4088.446667</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="id9">
<h3><span class="section-number">3.4.5. </span>이상치 제거<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<p>상류수위가 10 (EL.m) 이상인 데이터가 존재한다.
그런데 승촌보 수위는 그 이상이 될 수 없기에 이상치로 간주하고 삭제한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_data</span> <span class="o">=</span> <span class="n">scb_data</span><span class="p">[</span><span class="n">scb_data</span><span class="p">[</span><span class="s1">&#39;상류수위(EL.m)&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">]</span>
<span class="n">scb_data</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>수온 ℃</th>
      <th>수소이온농도</th>
      <th>전기전도도 μS/cm</th>
      <th>용존산소 mg/L</th>
      <th>총유기탄소 mg/L</th>
      <th>총질소 mg/L</th>
      <th>총인 mg/L</th>
      <th>클로로필-a mg/㎥</th>
      <th>상류수위(EL.m)</th>
      <th>하류수위(EL.m)</th>
      <th>유입량(㎥/s)</th>
      <th>방류량(㎥/s)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>64548.000000</td>
      <td>64535.000000</td>
      <td>64498.000000</td>
      <td>62630.000000</td>
      <td>58651.000000</td>
      <td>59955.000000</td>
      <td>58971.000000</td>
      <td>62850.000000</td>
      <td>82203.000000</td>
      <td>82203.000000</td>
      <td>82203.000000</td>
      <td>82203.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>17.308639</td>
      <td>7.032307</td>
      <td>344.316087</td>
      <td>7.501071</td>
      <td>4.341445</td>
      <td>5.359145</td>
      <td>0.118258</td>
      <td>50.971271</td>
      <td>6.444988</td>
      <td>2.463510</td>
      <td>31.215314</td>
      <td>31.095678</td>
    </tr>
    <tr>
      <th>std</th>
      <td>8.099587</td>
      <td>0.509353</td>
      <td>88.451036</td>
      <td>3.914639</td>
      <td>1.032804</td>
      <td>1.963861</td>
      <td>0.062981</td>
      <td>37.413957</td>
      <td>1.351669</td>
      <td>1.175611</td>
      <td>96.401627</td>
      <td>96.811397</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.800000</td>
      <td>6.100000</td>
      <td>92.000000</td>
      <td>0.500000</td>
      <td>1.600000</td>
      <td>0.706000</td>
      <td>0.003000</td>
      <td>1.000000</td>
      <td>2.600000</td>
      <td>-0.756667</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>9.400000</td>
      <td>6.700000</td>
      <td>281.000000</td>
      <td>4.400000</td>
      <td>3.600000</td>
      <td>3.821000</td>
      <td>0.074000</td>
      <td>20.900000</td>
      <td>5.570000</td>
      <td>1.538333</td>
      <td>11.320000</td>
      <td>11.133333</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>17.300000</td>
      <td>6.900000</td>
      <td>344.000000</td>
      <td>7.600000</td>
      <td>4.200000</td>
      <td>5.097000</td>
      <td>0.106000</td>
      <td>43.200000</td>
      <td>7.290000</td>
      <td>2.546667</td>
      <td>16.280000</td>
      <td>15.105000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>24.700000</td>
      <td>7.100000</td>
      <td>415.000000</td>
      <td>10.400000</td>
      <td>5.000000</td>
      <td>6.659000</td>
      <td>0.148000</td>
      <td>74.100000</td>
      <td>7.520000</td>
      <td>3.550000</td>
      <td>25.560000</td>
      <td>26.636667</td>
    </tr>
    <tr>
      <th>max</th>
      <td>36.100000</td>
      <td>10.000000</td>
      <td>730.000000</td>
      <td>24.300000</td>
      <td>19.300000</td>
      <td>12.357000</td>
      <td>0.745000</td>
      <td>453.500000</td>
      <td>9.993333</td>
      <td>9.925000</td>
      <td>3630.926667</td>
      <td>3430.493333</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section id="id10">
<h2><span class="section-number">3.5. </span>데이터셋 전처리<a class="headerlink" href="#id10" title="Link to this heading">#</a></h2>
<p><strong>특성 선택</strong></p>
<p>데이터 분석에 사용하지 않을 특성들은 삭제한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">to_be_removed</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;측정소명&#39;</span><span class="p">,</span> <span class="s1">&#39;수소이온농도&#39;</span><span class="p">]</span>

<span class="n">scb_data</span> <span class="o">=</span> <span class="n">scb_data</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">to_be_removed</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>특성 영문명 지정</strong></p>
<p>모델 훈련에 사용되는 모든 특성명을 영문으로 변경한다.
현재 남아 있는 특성들은 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_data</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;수온 ℃&#39;, &#39;전기전도도 μS/cm&#39;, &#39;용존산소 mg/L&#39;, &#39;총유기탄소 mg/L&#39;, &#39;총질소 mg/L&#39;, &#39;총인 mg/L&#39;,
       &#39;클로로필-a mg/㎥&#39;, &#39;상류수위(EL.m)&#39;, &#39;하류수위(EL.m)&#39;, &#39;유입량(㎥/s)&#39;, &#39;방류량(㎥/s)&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>각 특성의 영문명은 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">features_english</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;수온 ℃&#39;</span> <span class="p">:</span> <span class="s1">&#39;Temp&#39;</span><span class="p">,</span>
    <span class="s1">&#39;전기전도도 μS/cm&#39;</span> <span class="p">:</span> <span class="s1">&#39;EC&#39;</span><span class="p">,</span>
    <span class="s1">&#39;용존산소 mg/L&#39;</span> <span class="p">:</span> <span class="s1">&#39;DO&#39;</span><span class="p">,</span>
    <span class="s1">&#39;총유기탄소 mg/L&#39;</span> <span class="p">:</span> <span class="s1">&#39;TOC&#39;</span><span class="p">,</span>
    <span class="s1">&#39;총질소 mg/L&#39;</span> <span class="p">:</span> <span class="s1">&#39;TN&#39;</span><span class="p">,</span>
    <span class="s1">&#39;총인 mg/L&#39;</span> <span class="p">:</span> <span class="s1">&#39;TP&#39;</span><span class="p">,</span>
    <span class="s1">&#39;클로로필-a mg/㎥&#39;</span> <span class="p">:</span> <span class="s1">&#39;Chl-a&#39;</span><span class="p">,</span>
    <span class="s1">&#39;상류수위(EL.m)&#39;</span> <span class="p">:</span> <span class="s1">&#39;Upstream&#39;</span><span class="p">,</span>
    <span class="s1">&#39;하류수위(EL.m)&#39;</span> <span class="p">:</span> <span class="s1">&#39;Downstream&#39;</span><span class="p">,</span>
    <span class="s1">&#39;유입량(㎥/s)&#39;</span> <span class="p">:</span> <span class="s1">&#39;Inflow&#39;</span><span class="p">,</span>
    <span class="s1">&#39;방류량(㎥/s)&#39;</span> <span class="p">:</span> <span class="s1">&#39;D-Flow&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>영문명으로 변경(renaming)한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_data</span> <span class="o">=</span> <span class="n">scb_data</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">features_english</span><span class="p">)</span>
<span class="n">scb_data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Temp</th>
      <th>EC</th>
      <th>DO</th>
      <th>TOC</th>
      <th>TN</th>
      <th>TP</th>
      <th>Chl-a</th>
      <th>Upstream</th>
      <th>Downstream</th>
      <th>Inflow</th>
      <th>D-Flow</th>
    </tr>
    <tr>
      <th>DateTime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01 00:00:00</th>
      <td>3.9</td>
      <td>374.0</td>
      <td>11.4</td>
      <td>2.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>7.2</td>
      <td>7.50</td>
      <td>3.770000</td>
      <td>19.773333</td>
      <td>19.748333</td>
    </tr>
    <tr>
      <th>2013-01-01 01:00:00</th>
      <td>3.9</td>
      <td>375.0</td>
      <td>11.4</td>
      <td>2.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.9</td>
      <td>7.50</td>
      <td>3.770000</td>
      <td>19.701667</td>
      <td>19.706667</td>
    </tr>
    <tr>
      <th>2013-01-01 02:00:00</th>
      <td>4.0</td>
      <td>374.0</td>
      <td>11.4</td>
      <td>2.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.8</td>
      <td>7.50</td>
      <td>3.770000</td>
      <td>19.748333</td>
      <td>19.723333</td>
    </tr>
    <tr>
      <th>2013-01-01 03:00:00</th>
      <td>4.1</td>
      <td>375.0</td>
      <td>11.4</td>
      <td>2.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.9</td>
      <td>7.50</td>
      <td>3.770000</td>
      <td>19.613333</td>
      <td>19.610000</td>
    </tr>
    <tr>
      <th>2013-01-01 04:00:00</th>
      <td>4.0</td>
      <td>380.0</td>
      <td>11.3</td>
      <td>2.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>6.9</td>
      <td>7.50</td>
      <td>3.770000</td>
      <td>19.661667</td>
      <td>19.665000</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2022-05-23 19:00:00</th>
      <td>26.6</td>
      <td>419.0</td>
      <td>NaN</td>
      <td>6.7</td>
      <td>5.825</td>
      <td>0.108</td>
      <td>66.2</td>
      <td>5.44</td>
      <td>1.530000</td>
      <td>12.763333</td>
      <td>12.766667</td>
    </tr>
    <tr>
      <th>2022-05-23 20:00:00</th>
      <td>26.3</td>
      <td>425.0</td>
      <td>NaN</td>
      <td>6.5</td>
      <td>5.803</td>
      <td>0.107</td>
      <td>61.2</td>
      <td>5.44</td>
      <td>1.533333</td>
      <td>12.788333</td>
      <td>12.786667</td>
    </tr>
    <tr>
      <th>2022-05-23 21:00:00</th>
      <td>25.9</td>
      <td>417.0</td>
      <td>NaN</td>
      <td>6.7</td>
      <td>5.909</td>
      <td>0.107</td>
      <td>58.3</td>
      <td>5.44</td>
      <td>1.531667</td>
      <td>12.753333</td>
      <td>12.743333</td>
    </tr>
    <tr>
      <th>2022-05-23 22:00:00</th>
      <td>25.7</td>
      <td>420.0</td>
      <td>NaN</td>
      <td>6.4</td>
      <td>5.921</td>
      <td>0.106</td>
      <td>54.4</td>
      <td>5.44</td>
      <td>1.530000</td>
      <td>12.700000</td>
      <td>12.700000</td>
    </tr>
    <tr>
      <th>2022-05-23 23:00:00</th>
      <td>25.5</td>
      <td>411.0</td>
      <td>NaN</td>
      <td>6.4</td>
      <td>5.818</td>
      <td>0.106</td>
      <td>52.3</td>
      <td>5.44</td>
      <td>1.525000</td>
      <td>12.760000</td>
      <td>12.770000</td>
    </tr>
  </tbody>
</table>
<p>82203 rows × 11 columns</p>
</div></div></div>
</div>
<section id="id11">
<h3><span class="section-number">3.5.1. </span>1시간 단위로 정리된 데이터를 1일 단위로 변경<a class="headerlink" href="#id11" title="Link to this heading">#</a></h3>
<p>클로로필-a 수치가 일정 기간 유지될 때 각 특성의 일별 변화를 추적하려 한다.
이를 위해 모든 특성의 일별 평균값을 이용한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_df_daily</span> <span class="o">=</span> <span class="n">scb_data</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">scb_df_daily</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Temp</th>
      <th>EC</th>
      <th>DO</th>
      <th>TOC</th>
      <th>TN</th>
      <th>TP</th>
      <th>Chl-a</th>
      <th>Upstream</th>
      <th>Downstream</th>
      <th>Inflow</th>
      <th>D-Flow</th>
    </tr>
    <tr>
      <th>DateTime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2013-01-01</th>
      <td>4.113043</td>
      <td>406.391304</td>
      <td>10.795652</td>
      <td>2.791667</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>7.025000</td>
      <td>7.490903</td>
      <td>3.761667</td>
      <td>19.044861</td>
      <td>18.733472</td>
    </tr>
    <tr>
      <th>2013-01-02</th>
      <td>4.282609</td>
      <td>431.260870</td>
      <td>9.156522</td>
      <td>2.839130</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>7.056522</td>
      <td>7.501458</td>
      <td>3.751597</td>
      <td>18.648889</td>
      <td>18.929167</td>
    </tr>
    <tr>
      <th>2013-01-03</th>
      <td>3.830435</td>
      <td>416.565217</td>
      <td>7.639130</td>
      <td>3.058333</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>7.195833</td>
      <td>7.499236</td>
      <td>3.737708</td>
      <td>16.611111</td>
      <td>16.621250</td>
    </tr>
    <tr>
      <th>2013-01-04</th>
      <td>3.313043</td>
      <td>402.000000</td>
      <td>8.830435</td>
      <td>2.730435</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>7.126087</td>
      <td>7.489722</td>
      <td>3.726389</td>
      <td>15.713681</td>
      <td>15.805556</td>
    </tr>
    <tr>
      <th>2013-01-05</th>
      <td>3.165217</td>
      <td>409.304348</td>
      <td>8.839130</td>
      <td>2.800000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>7.220833</td>
      <td>7.494722</td>
      <td>3.719722</td>
      <td>13.181319</td>
      <td>13.062361</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2022-05-19</th>
      <td>21.933333</td>
      <td>477.380952</td>
      <td>NaN</td>
      <td>6.066667</td>
      <td>7.954952</td>
      <td>0.096714</td>
      <td>48.766667</td>
      <td>5.422292</td>
      <td>1.507292</td>
      <td>7.193333</td>
      <td>6.935208</td>
    </tr>
    <tr>
      <th>2022-05-20</th>
      <td>22.391304</td>
      <td>469.434783</td>
      <td>1.185714</td>
      <td>6.323810</td>
      <td>7.994000</td>
      <td>0.094545</td>
      <td>54.026087</td>
      <td>5.483750</td>
      <td>1.498681</td>
      <td>9.980069</td>
      <td>8.437014</td>
    </tr>
    <tr>
      <th>2022-05-21</th>
      <td>23.054167</td>
      <td>460.041667</td>
      <td>0.812500</td>
      <td>6.162500</td>
      <td>7.449708</td>
      <td>0.107333</td>
      <td>56.941667</td>
      <td>5.530972</td>
      <td>1.560486</td>
      <td>11.699722</td>
      <td>12.939444</td>
    </tr>
    <tr>
      <th>2022-05-22</th>
      <td>24.270833</td>
      <td>459.000000</td>
      <td>0.608333</td>
      <td>6.020833</td>
      <td>7.154875</td>
      <td>0.092583</td>
      <td>53.133333</td>
      <td>5.459792</td>
      <td>1.521528</td>
      <td>10.582986</td>
      <td>10.072014</td>
    </tr>
    <tr>
      <th>2022-05-23</th>
      <td>25.213636</td>
      <td>436.227273</td>
      <td>NaN</td>
      <td>6.273684</td>
      <td>6.103143</td>
      <td>0.098476</td>
      <td>55.368182</td>
      <td>5.471667</td>
      <td>1.519583</td>
      <td>11.803958</td>
      <td>12.829653</td>
    </tr>
  </tbody>
</table>
<p>3430 rows × 11 columns</p>
</div></div></div>
</div>
<p>일부 특성에 결측치가 많지만 지금 당장 제거하지는 않는다.
이유는 이어서 다루는 클로로필-a와 녹조경보와의 연관성에서 일부 결측치가 자연스럽게 제거될 것이기 때문이다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_df_daily</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
DatetimeIndex: 3430 entries, 2013-01-01 to 2022-05-23
Freq: D
Data columns (total 11 columns):
 #   Column      Non-Null Count  Dtype  
---  ------      --------------  -----  
 0   Temp        2849 non-null   float64
 1   EC          2849 non-null   float64
 2   DO          2826 non-null   float64
 3   TOC         2682 non-null   float64
 4   TN          2698 non-null   float64
 5   TP          2691 non-null   float64
 6   Chl-a       2772 non-null   float64
 7   Upstream    3430 non-null   float64
 8   Downstream  3430 non-null   float64
 9   Inflow      3430 non-null   float64
 10  D-Flow      3430 non-null   float64
dtypes: float64(11)
memory usage: 321.6 KB
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id12">
<h2><span class="section-number">3.6. </span>호소수 클로로필-a 수질환경기준에 따른 방류량과 수온의 변화<a class="headerlink" href="#id12" title="Link to this heading">#</a></h2>
<p>2018년 5월에 개정된 호소수의 클로로필-a (<span class="math notranslate nohighlight">\(\mathrm{mg}\)</span>/<span class="math notranslate nohighlight">\(\mathrm{m}^3\)</span>)에 수질환경기준은 다음과 같다.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>등급</p></th>
<th class="head text-center"><p>기준</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>매우 좋음</p></td>
<td class="text-center"><p>5 이하</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>좋음</p></td>
<td class="text-center"><p>9 이하</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>약간 좋음</p></td>
<td class="text-center"><p>14 이하</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>보통</p></td>
<td class="text-center"><p>20 이하</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>약간 나쁨</p></td>
<td class="text-center"><p>35 이하</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>나쁨</p></td>
<td class="text-center"><p>70 이하</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>매우 나쁨</p></td>
<td class="text-center"><p>70 초과</p></td>
</tr>
</tbody>
</table>
</div>
<p>또한 아래 표에서처럼 2015년까지는
클로로필-a (<span class="math notranslate nohighlight">\(\mathrm{mg}\)</span>/<span class="math notranslate nohighlight">\(\mathrm{m}^3\)</span>) 농도가 지정된 기준값 이상으로 2주동안 지속되는 경우
녹조발생 주의보/경보/대발생을 발령했다.
(참고: 조류경보제 개선으로 체계적인 녹조관리(2015.12.1 보도자료))</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>구분</p></th>
<th class="head text-center"><p>기준</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>주의보(관심)</p></td>
<td class="text-center"><p>15 이상</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>경보(경계)</p></td>
<td class="text-center"><p>25 이상</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>대발생</p></td>
<td class="text-center"><p>100 이상</p></td>
</tr>
</tbody>
</table>
</div>
<p>이에 착안하여 클로로필-a 농도가 특정값 이상으로 2주 동안 지속될 때의 수온과 방류량를 변화를 확인해 본다.
이를 통해 클로로필-a 농도 예측에 방류량과 수온이 매우 중요한 요인임을 확인할 수 있다.
무엇보다도 어떠한 머신러닝 모델 학습 등을 적용하지 않고
주어진 데이터의 통계 자료만을 이용하여 결과를 유도한다.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">feature_fordays()</span></code> 함수</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">feature</span></code> 값이 <code class="docutils literal notranslate"><span class="pre">feature_interval</span></code> 구간 사이에 머무른 날이 <code class="docutils literal notranslate"><span class="pre">days</span></code> 일 이상 지속된 날짜 데이터만 추출한다.
<code class="docutils literal notranslate"><span class="pre">days</span></code>의 기본값은 14일로 지정한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">feature_fordays</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">scb_df_daily</span><span class="p">,</span> <span class="n">feature</span><span class="o">=</span><span class="s1">&#39;Chl-a&#39;</span><span class="p">,</span> <span class="n">feature_interval</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span> <span class="n">days</span><span class="o">=</span><span class="mi">14</span><span class="p">):</span>
    
    <span class="c1"># feature 값이 연속적으로 지정된 구간에 머문 날짜 대상 마스크</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">days</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">feature_interval</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">days</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">feature_interval</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    
    <span class="n">df_days</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">df_days</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Features with units</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">feature_units_</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Temp ($^\circ\!$C)&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Electrical Conductivity&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Dissolved Oxygen&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Total Organic Carbon&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Total Nitrogen&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Total Phosphorus&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Chl-a ($\mathdefault</span><span class="si">{mg}</span><span class="s1">/\mathdefault</span><span class="si">{m}</span><span class="s1">^3$)&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Upstream&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Downstream&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;Inflow&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;D-Flow ($\mathdefault</span><span class="si">{m}</span><span class="s1">^3/\mathdefault</span><span class="si">{s}</span><span class="s1">$)&#39;</span><span class="p">]</span>

<span class="n">feature_units</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">features_english</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">feature_units_</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">feature_units</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;Temp&#39;: &#39;Temp ($^\\circ\\!$C)&#39;,
 &#39;EC&#39;: &#39;Electrical Conductivity&#39;,
 &#39;DO&#39;: &#39;Dissolved Oxygen&#39;,
 &#39;TOC&#39;: &#39;Total Organic Carbon&#39;,
 &#39;TN&#39;: &#39;Total Nitrogen&#39;,
 &#39;TP&#39;: &#39;Total Phosphorus&#39;,
 &#39;Chl-a&#39;: &#39;Chl-a ($\\mathdefault{mg}/\\mathdefault{m}^3$)&#39;,
 &#39;Upstream&#39;: &#39;Upstream&#39;,
 &#39;Downstream&#39;: &#39;Downstream&#39;,
 &#39;Inflow&#39;: &#39;Inflow&#39;,
 &#39;D-Flow&#39;: &#39;D-Flow ($\\mathdefault{m}^3/\\mathdefault{s}$)&#39;}
</pre></div>
</div>
</div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">plot_feature_fordays()</span></code> 함수</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">feature</span></code> 값이 <code class="docutils literal notranslate"><span class="pre">feature_interval</span></code> 구간에서 <code class="docutils literal notranslate"><span class="pre">days</span></code>일 동안 지속되는 경우의
<code class="docutils literal notranslate"><span class="pre">feature_out</span></code> 특성의 구간별 빈도를 히스토그램으로 나타낸다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_feature_fordays</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">scb_df_daily</span><span class="p">,</span> <span class="n">feature</span><span class="o">=</span><span class="s1">&#39;Chl-a&#39;</span><span class="p">,</span> <span class="n">feature_interval</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span> <span class="n">days</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> 
                         <span class="n">feature_out</span><span class="o">=</span><span class="s1">&#39;D-Flow&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">xticks</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">10</span><span class="p">)):</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">feature_fordays</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">feature</span><span class="p">,</span> <span class="n">feature_interval</span><span class="p">,</span> <span class="n">days</span><span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature_out</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">xticks</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">feature_units</span><span class="p">[</span><span class="n">feature_out</span><span class="p">]</span><span class="si">}</span><span class="s1"> &#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
    
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;font&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>            <span class="c1"># 폰트 크기</span>
</pre></div>
</div>
</div>
</div>
<p><strong>방류량 히스토그램</strong></p>
<p>클로로필-a의 농도가 2주 이상 일정 기준 이상 유지될 때 방류량 빈도를 히스토그램으로 나타낸다.</p>
<ul class="simple">
<li><p>클로로필-a 농도가 20 이하인 경우의 방류량 히스토그램</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/ddaae1d9d304e1e630aed1f940426f2fba1da7e3c5bd65a644cd5fba50a62134.png" src="_images/ddaae1d9d304e1e630aed1f940426f2fba1da7e3c5bd65a644cd5fba50a62134.png" />
</div>
</div>
<ul class="simple">
<li><p>클로로필-a 농도가 20 초과, 70 이하인 경우의 방류량 히스토그램</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">70</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/6d1dae987e1f61c7bff336dfc79068bf3bbbbebc03c9c2b3cd5829af12f69040.png" src="_images/6d1dae987e1f61c7bff336dfc79068bf3bbbbebc03c9c2b3cd5829af12f69040.png" />
</div>
</div>
<ul class="simple">
<li><p>클로로필-a 농도가 70 초과인 경우의 방류량 히스토그램</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="p">[</span><span class="mi">68</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/937227dcdea27bc2bd5060efc57af2e12f401c31da560cd6aa63e98d557ed269.png" src="_images/937227dcdea27bc2bd5060efc57af2e12f401c31da560cd6aa63e98d557ed269.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="p">[</span><span class="mi">65</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/ecc6c516a0eca19127a3077a5b449f0608192dc45190c9b779cc4c9a6ebbb0e2.png" src="_images/ecc6c516a0eca19127a3077a5b449f0608192dc45190c9b779cc4c9a6ebbb0e2.png" />
</div>
</div>
<ul class="simple">
<li><p>클로로필-a 농도가 100 초과인 경우의 방류량 히스토그램</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/65422df8ebf4e6d7a84ed9afa6cb6c456f664d4237580aa9435baeff72c6b3cf.png" src="_images/65422df8ebf4e6d7a84ed9afa6cb6c456f664d4237580aa9435baeff72c6b3cf.png" />
</div>
</div>
<p><strong>수온 히스토그램</strong></p>
<p>클로로필-a의 농도가 50 또는 100 이상 2주 이상 지속되면 방류량이 10 전후인 경우가 매우 많아진다.
방류량이 그렇게 오랜 시간동안 적은 이유는 한국 기후의 특성상 강우량이 적은 시기,
특히 겨울일 가능성이 높다.
실제로 수온에 대한 히스토그램을 그려보면, 낮은 수온에서도 클로로필-a 수치가 50이상 높은 농도의 수치가 2주동안 지속되는 경우가 많음을 확인할 수 있다.</p>
<ul class="simple">
<li><p>클로로필-a 농도가 50 이상인 경우의 수온 히스토그램:
수온의 분포를 보면 클로로필-a의 농도가 2주이상 유지되는 경우가 계절에 상관없이 발생함을 알 수 있다.
그래도 10도 이하의 경우가 가장 많은데, 이는 특히 겨울에 클로로필-a의 농도가 높게 유지된다는 것을 보여준다.
앞서 방류량 히스토그램에서 확인했듯이 우리나라 겨울철에 강우량 등 승촌보에 유입되는 수량이 기본적으로 적기 때문에
수온과 상관없이 클로로필-a의 수치가 높게 유지되는 것으로 보인다.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span> <span class="n">feature_out</span><span class="o">=</span><span class="s1">&#39;Temp&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">xticks</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/97b9a00e1721f07e2577931e21a2893a951cd60a3c179430a8ded62de33e0c7e.png" src="_images/97b9a00e1721f07e2577931e21a2893a951cd60a3c179430a8ded62de33e0c7e.png" />
</div>
</div>
<ul class="simple">
<li><p>클로로필-a 농도가 70 이상인 경우의 수온 히스토그램:
수온이 10도 이하의 경우의 비중이 더 높아진다. 즉, 수온이 낮은 경우에 오히려 매우 나쁨 수준의 클로로필-a의 농도가 겨울에 상대적으로 보다 자주
발생한다는 것을 보여준다.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span> <span class="n">feature_out</span><span class="o">=</span><span class="s1">&#39;Temp&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">xticks</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/ee671230aa18fa8b592637a330abb240c8350a6443bf715e3a413d4b4eaf5c80.png" src="_images/ee671230aa18fa8b592637a330abb240c8350a6443bf715e3a413d4b4eaf5c80.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="n">feature_out</span><span class="o">=</span><span class="s1">&#39;Temp&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">xticks</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/ba1bfea0a46e4b1fd681bfbb24bf9245adad5fa83e11a7da1ede42f37b56402e.png" src="_images/ba1bfea0a46e4b1fd681bfbb24bf9245adad5fa83e11a7da1ede42f37b56402e.png" />
</div>
</div>
<ul class="simple">
<li><p>클로로필-a 농도가 100 이상인 경우의 수온 히스토그램:
이번엔 수온의 분포가 더욱 극단적이다. 수온이 한 번을 제외하고는 4도에서 12도 사이에만 몰려있다.
즉, 클로로필-a의 농도가 100이상 2주동안 유지된 경우가 20여회로 많지는 않았지만 대부분 겨울에,
그것도 극단적으로 수량이 적었던 기간동안 발생했다는 의미다.
나머지 한 번은 여름에 한 번 발생했는데 수온이 2주 이상 30도 정도로 유지된 경우다.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span> <span class="n">feature_out</span><span class="o">=</span><span class="s1">&#39;Temp&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">xticks</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/670d20fd79dc2979bc7e57baa96b88e8581cf3a7ae131c961e0292404d2f9672.png" src="_images/670d20fd79dc2979bc7e57baa96b88e8581cf3a7ae131c961e0292404d2f9672.png" />
</div>
</div>
<p>실제로 클로로필-a의 수치가 100을 초과하여 2주동안 지속되는 시기를 확인하면 다음과 같이 2022년 2월 16일부터 3월 2일까지이다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_df_daily_100</span> <span class="o">=</span> <span class="n">feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span> <span class="n">days</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>

<span class="n">scb_df_daily_100</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Temp</th>
      <th>EC</th>
      <th>DO</th>
      <th>TOC</th>
      <th>TN</th>
      <th>TP</th>
      <th>Chl-a</th>
      <th>Upstream</th>
      <th>Downstream</th>
      <th>Inflow</th>
      <th>D-Flow</th>
    </tr>
    <tr>
      <th>DateTime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2022-02-16</th>
      <td>8.083333</td>
      <td>452.375000</td>
      <td>9.883333</td>
      <td>4.991667</td>
      <td>10.063625</td>
      <td>0.112500</td>
      <td>131.812500</td>
      <td>5.959931</td>
      <td>1.520208</td>
      <td>9.143889</td>
      <td>8.890486</td>
    </tr>
    <tr>
      <th>2022-02-17</th>
      <td>7.325000</td>
      <td>455.583333</td>
      <td>10.725000</td>
      <td>5.137500</td>
      <td>10.086625</td>
      <td>0.117875</td>
      <td>141.195833</td>
      <td>5.964792</td>
      <td>1.509931</td>
      <td>9.190903</td>
      <td>8.849236</td>
    </tr>
    <tr>
      <th>2022-02-18</th>
      <td>7.304348</td>
      <td>454.608696</td>
      <td>12.030435</td>
      <td>5.315000</td>
      <td>10.179952</td>
      <td>0.109000</td>
      <td>142.256522</td>
      <td>5.966250</td>
      <td>1.512847</td>
      <td>10.193819</td>
      <td>11.048403</td>
    </tr>
    <tr>
      <th>2022-02-19</th>
      <td>7.062500</td>
      <td>455.583333</td>
      <td>11.608333</td>
      <td>5.166667</td>
      <td>10.702762</td>
      <td>0.103542</td>
      <td>127.221739</td>
      <td>5.956042</td>
      <td>1.509236</td>
      <td>9.133333</td>
      <td>8.107431</td>
    </tr>
    <tr>
      <th>2022-02-20</th>
      <td>6.458333</td>
      <td>462.125000</td>
      <td>10.091667</td>
      <td>5.075000</td>
      <td>10.674091</td>
      <td>0.105458</td>
      <td>107.775000</td>
      <td>5.977847</td>
      <td>1.517222</td>
      <td>10.311736</td>
      <td>10.995069</td>
    </tr>
    <tr>
      <th>2022-02-21</th>
      <td>6.745455</td>
      <td>461.636364</td>
      <td>10.386364</td>
      <td>5.090000</td>
      <td>10.234417</td>
      <td>0.106000</td>
      <td>102.059091</td>
      <td>5.959514</td>
      <td>1.519097</td>
      <td>9.600486</td>
      <td>8.917014</td>
    </tr>
    <tr>
      <th>2022-02-22</th>
      <td>6.834783</td>
      <td>452.304348</td>
      <td>10.708696</td>
      <td>4.875000</td>
      <td>NaN</td>
      <td>0.104500</td>
      <td>113.804167</td>
      <td>5.967361</td>
      <td>1.517639</td>
      <td>9.988681</td>
      <td>11.014861</td>
    </tr>
    <tr>
      <th>2022-02-23</th>
      <td>6.650000</td>
      <td>450.250000</td>
      <td>10.925000</td>
      <td>NaN</td>
      <td>11.166100</td>
      <td>0.115000</td>
      <td>127.666667</td>
      <td>5.957569</td>
      <td>1.154167</td>
      <td>6.771736</td>
      <td>6.059722</td>
    </tr>
    <tr>
      <th>2022-02-24</th>
      <td>6.452174</td>
      <td>449.826087</td>
      <td>11.913043</td>
      <td>6.275000</td>
      <td>10.335700</td>
      <td>0.121042</td>
      <td>143.304348</td>
      <td>5.963403</td>
      <td>1.197639</td>
      <td>7.550903</td>
      <td>8.747569</td>
    </tr>
    <tr>
      <th>2022-02-25</th>
      <td>7.054545</td>
      <td>443.363636</td>
      <td>11.940909</td>
      <td>6.085000</td>
      <td>9.406500</td>
      <td>0.108810</td>
      <td>133.490909</td>
      <td>5.952986</td>
      <td>1.513958</td>
      <td>9.141458</td>
      <td>8.115417</td>
    </tr>
    <tr>
      <th>2022-02-26</th>
      <td>7.829167</td>
      <td>442.458333</td>
      <td>11.662500</td>
      <td>6.170833</td>
      <td>10.440625</td>
      <td>0.092375</td>
      <td>122.100000</td>
      <td>5.971944</td>
      <td>1.530833</td>
      <td>9.501528</td>
      <td>9.275903</td>
    </tr>
    <tr>
      <th>2022-02-27</th>
      <td>8.370833</td>
      <td>435.500000</td>
      <td>10.279167</td>
      <td>6.100000</td>
      <td>9.913708</td>
      <td>0.099435</td>
      <td>120.950000</td>
      <td>5.961597</td>
      <td>1.535000</td>
      <td>9.848056</td>
      <td>11.043958</td>
    </tr>
    <tr>
      <th>2022-02-28</th>
      <td>8.965217</td>
      <td>435.043478</td>
      <td>10.578261</td>
      <td>5.991304</td>
      <td>9.401286</td>
      <td>0.086952</td>
      <td>122.778261</td>
      <td>5.953472</td>
      <td>1.518194</td>
      <td>8.034931</td>
      <td>6.833333</td>
    </tr>
    <tr>
      <th>2022-03-01</th>
      <td>9.787500</td>
      <td>444.083333</td>
      <td>10.004167</td>
      <td>5.991667</td>
      <td>NaN</td>
      <td>0.078167</td>
      <td>119.037500</td>
      <td>5.984931</td>
      <td>1.515833</td>
      <td>10.506181</td>
      <td>11.018819</td>
    </tr>
    <tr>
      <th>2022-03-02</th>
      <td>9.736364</td>
      <td>449.636364</td>
      <td>9.109091</td>
      <td>6.077778</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>117.491667</td>
      <td>5.960903</td>
      <td>1.520625</td>
      <td>9.297083</td>
      <td>8.955486</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>비교를 위해 하나의 그래프로 그린다.</p>
<ul class="simple">
<li><p>수온 분포</p></li>
<li><p>클로로필-a 수치가 2주동안 평균 50 이상일 때와 100 이상일 때 비교</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">feature</span> <span class="o">=</span> <span class="s1">&#39;Temp&#39;</span>
<span class="n">days</span><span class="o">=</span><span class="mi">14</span>
<span class="n">bins</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">xticks</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">chla_thresholds</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">50</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span>   <span class="c1"># 50 이상</span>
                   <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]]</span>  <span class="c1"># 100 이상</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span><span class="c1">#, sharey=True)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">supxlabel</span><span class="p">(</span><span class="s1">&#39;Temperature ($</span><span class="si">{}</span><span class="s1">^\circ\! \mathdefault</span><span class="si">{C}</span><span class="s1">$)&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">supylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.08</span><span class="p">)</span>
<span class="c1"># fig.subplots_adjust(hspace=0.5)</span>

<span class="n">abcd</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;(c)&#39;</span><span class="p">,</span> <span class="s1">&#39;(d)&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="n">chla_thresholds</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">xticks</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">abcd</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.03</span><span class="p">,</span> <span class="n">x</span><span class="o">=-</span><span class="mf">0.04</span><span class="p">)</span>
    
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/903ab3c8b031e1943328962fcb63e8eb38ac0462a76db7d7a7f75b308436486b.png" src="_images/903ab3c8b031e1943328962fcb63e8eb38ac0462a76db7d7a7f75b308436486b.png" />
</div>
</div>
<ul class="simple">
<li><p>수온 분포</p></li>
<li><p>클로로필-a 수치가 2주동안 평균 70 이상일 때와 100 이상일 때 비교</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">feature</span> <span class="o">=</span> <span class="s1">&#39;Temp&#39;</span>
<span class="n">days</span><span class="o">=</span><span class="mi">14</span>
<span class="n">bins</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">xticks</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">chla_thresholds</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">70</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span>   <span class="c1"># 70 이상</span>
                   <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]]</span>  <span class="c1"># 100 이상</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span><span class="c1">#, sharey=True)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">supxlabel</span><span class="p">(</span><span class="s1">&#39;Temperature ($</span><span class="si">{}</span><span class="s1">^\circ\! \mathdefault</span><span class="si">{C}</span><span class="s1">$)&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=-</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">supylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.08</span><span class="p">)</span>
<span class="c1"># fig.subplots_adjust(hspace=0.5)</span>

<span class="n">abcd</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;(c)&#39;</span><span class="p">,</span> <span class="s1">&#39;(d)&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="n">chla_thresholds</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">xticks</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">abcd</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.03</span><span class="p">,</span> <span class="n">x</span><span class="o">=-</span><span class="mf">0.04</span><span class="p">)</span>
    
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/1ee5861e587d414d58eba978d6c5c01b0df27fd2f2ec330b17bfbda15397e1f0.png" src="_images/1ee5861e587d414d58eba978d6c5c01b0df27fd2f2ec330b17bfbda15397e1f0.png" />
</div>
</div>
<ul class="simple">
<li><p>방류량 분포</p></li>
<li><p>클로로필-a 수치가 2주동안 평균 20 이하일 때, 20 이상일 때, 70 이상일 때, 100 이상일 때 비교</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
<span class="c1"># fig.supxlabel(&#39;Discharge flow rate ($\mathdefault{m}^3/\mathdefault{s}$)&#39;, y=0.04)</span>
<span class="c1"># fig.supylabel(&#39;Frequency&#39;, x=0.08)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">abcd</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;(a)&#39;</span><span class="p">,</span> <span class="s1">&#39;(b)&#39;</span><span class="p">,</span> <span class="s1">&#39;(c)&#39;</span><span class="p">,</span> <span class="s1">&#39;(d)&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()):</span>
    <span class="n">feature</span> <span class="o">=</span> <span class="s1">&#39;D-Flow&#39;</span>
    <span class="n">days</span><span class="o">=</span><span class="mi">14</span>
    <span class="n">bins</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">xticks</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">xlabel</span> <span class="o">=</span> <span class="s1">&#39;D-Flow ($\mathdefault</span><span class="si">{m}</span><span class="s1">^3/\mathdefault</span><span class="si">{s}</span><span class="s1">$)&#39;</span>

    <span class="n">chla_thresholds</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> 
                       <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span>
                       <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span>
                       <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]]</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="n">chla_thresholds</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">xticks</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">xlabel</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">xticks</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="c1"># ax.set_ylim(0, 95)</span>


    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">abcd</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.03</span><span class="p">,</span> <span class="n">x</span><span class="o">=-</span><span class="mf">0.04</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<span class="n">save_fig</span><span class="p">(</span><span class="s1">&#39;figure6&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/46db4e9511d7bc4791d4901589b8846c018e183995f03f3f821cf31d30a930f5.png" src="_images/46db4e9511d7bc4791d4901589b8846c018e183995f03f3f821cf31d30a930f5.png" />
</div>
</div>
<ul class="simple">
<li><p>수온 분포</p></li>
<li><p>클로로필-a 수치가 2주동안 평균 20 이하일 때, 20 이상일 때, 70 이상일 때, 100 이상일 때 비교</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
<span class="c1"># fig.supxlabel(&#39;Discharge flow rate ($\mathdefault{m}^3/\mathdefault{s}$)&#39;, y=0.04)</span>
<span class="c1"># fig.supylabel(&#39;Frequency&#39;, x=0.08)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">abcd</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;(a)&#39;</span><span class="p">,</span> <span class="s1">&#39;(b)&#39;</span><span class="p">,</span> <span class="s1">&#39;(c)&#39;</span><span class="p">,</span> <span class="s1">&#39;(d)&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()):</span>
    <span class="n">feature</span> <span class="o">=</span> <span class="s1">&#39;Temp&#39;</span>
    <span class="n">days</span><span class="o">=</span><span class="mi">14</span>
    <span class="n">bins</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">xticks</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">xlabel</span> <span class="o">=</span> <span class="s1">&#39;Temp ($</span><span class="si">{}</span><span class="s1">^\circ\!$C)&#39;</span>

    <span class="n">chla_thresholds</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> 
                       <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span>
                       <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span>
                       <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]]</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">feature_fordays</span><span class="p">(</span><span class="n">feature_interval</span><span class="o">=</span><span class="n">chla_thresholds</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">xticks</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">xlabel</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">xticks</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="c1"># ax.set_ylim(0, 95)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">abcd</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.03</span><span class="p">,</span> <span class="n">x</span><span class="o">=-</span><span class="mf">0.04</span><span class="p">)</span>

<span class="n">save_fig</span><span class="p">(</span><span class="s1">&#39;figureS3&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/e48d36cd26a6355e5220d1493831ea0098c7c6aa7ae4e9dc653c255f49a79385.png" src="_images/e48d36cd26a6355e5220d1493831ea0098c7c6aa7ae4e9dc653c255f49a79385.png" />
</div>
</div>
<section id="id13">
<h3><span class="section-number">3.6.1. </span>클로로필-a 농도 기준에 따른 특성들의 변화<a class="headerlink" href="#id13" title="Link to this heading">#</a></h3>
<p>클로로필-a 농도가 15, 25, 50, 100 이상 2주 이상 유지될 때의 방류량과 수온의 변화를 살펴본 과정을
보다 세분화하여 방류량과 수온의 변화의 연속성을 확인한다.
이를 위해 클로로필-a 농도의 기준값은 10부터 100까지의 구간 내에서 값을 5씩 키우며 다른 특성들의 변화를 살펴본다.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">algal_alarm_level()</span></code> 함수</strong></p>
<p>클로로필-a 농도가 10부터 100 사이의 기준값 이상 <code class="docutils literal notranslate"><span class="pre">weeks</span></code> 주동안 지속될 때의 각 특성별 사분위수(기본값은 평균값)을 확인한다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">quartile='mean'</span></code>: 사분위수 지정. 기본은 평균값.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">algal_alarm_level</span><span class="p">(</span><span class="n">quartile</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="n">weeks</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>

    <span class="n">day_quartile_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">threshold</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">scb_df_daily</span><span class="p">[</span><span class="s1">&#39;Chl-a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">weeks</span><span class="o">*</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">threshold</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">scb_df_daily</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="n">day_quartile</span> <span class="o">=</span> <span class="n">desc</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">quartile</span><span class="p">]</span>
        <span class="n">day_quartile_dict</span><span class="p">[</span><span class="n">threshold</span><span class="p">]</span> <span class="o">=</span> <span class="n">day_quartile</span>

    <span class="n">day_quartile_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">day_quartile_dict</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
    
    <span class="k">return</span> <span class="n">day_quartile_df</span>
</pre></div>
</div>
</div>
</div>
<p>클로로필-a 농도가 지정된 기준값 이상 2주동안 지속될 때 각 특성별 평균값의 변화는 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">day_quartile_df</span> <span class="o">=</span> <span class="n">algal_alarm_level</span><span class="p">(</span><span class="n">quartile</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
<span class="n">day_quartile_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Temp</th>
      <th>EC</th>
      <th>DO</th>
      <th>TOC</th>
      <th>TN</th>
      <th>TP</th>
      <th>Chl-a</th>
      <th>Upstream</th>
      <th>Downstream</th>
      <th>Inflow</th>
      <th>D-Flow</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>10</th>
      <td>17.947644</td>
      <td>359.108395</td>
      <td>7.453648</td>
      <td>4.609364</td>
      <td>5.636368</td>
      <td>0.118779</td>
      <td>60.652574</td>
      <td>6.800400</td>
      <td>2.535053</td>
      <td>20.221653</td>
      <td>20.074640</td>
    </tr>
    <tr>
      <th>15</th>
      <td>17.344083</td>
      <td>368.767635</td>
      <td>7.913794</td>
      <td>4.617135</td>
      <td>5.800716</td>
      <td>0.113522</td>
      <td>65.327176</td>
      <td>6.756246</td>
      <td>2.465678</td>
      <td>18.508541</td>
      <td>18.339211</td>
    </tr>
    <tr>
      <th>20</th>
      <td>16.789464</td>
      <td>377.187009</td>
      <td>8.367161</td>
      <td>4.640582</td>
      <td>5.920785</td>
      <td>0.111822</td>
      <td>69.321608</td>
      <td>6.678750</td>
      <td>2.336811</td>
      <td>17.142171</td>
      <td>16.969273</td>
    </tr>
    <tr>
      <th>25</th>
      <td>16.363852</td>
      <td>378.136313</td>
      <td>8.549731</td>
      <td>4.625165</td>
      <td>5.979717</td>
      <td>0.111937</td>
      <td>73.168973</td>
      <td>6.621113</td>
      <td>2.263366</td>
      <td>17.220013</td>
      <td>17.021399</td>
    </tr>
    <tr>
      <th>30</th>
      <td>16.030472</td>
      <td>380.085213</td>
      <td>9.034202</td>
      <td>4.638945</td>
      <td>6.087446</td>
      <td>0.109077</td>
      <td>79.753048</td>
      <td>6.505022</td>
      <td>2.149508</td>
      <td>16.795517</td>
      <td>16.651541</td>
    </tr>
    <tr>
      <th>35</th>
      <td>16.361083</td>
      <td>375.878402</td>
      <td>9.163261</td>
      <td>4.657112</td>
      <td>6.100338</td>
      <td>0.105522</td>
      <td>85.207885</td>
      <td>6.474581</td>
      <td>2.101930</td>
      <td>16.509336</td>
      <td>16.353601</td>
    </tr>
    <tr>
      <th>40</th>
      <td>15.767567</td>
      <td>383.022720</td>
      <td>9.554727</td>
      <td>4.675775</td>
      <td>6.337922</td>
      <td>0.102628</td>
      <td>88.954035</td>
      <td>6.404192</td>
      <td>1.985288</td>
      <td>15.488985</td>
      <td>15.328770</td>
    </tr>
    <tr>
      <th>45</th>
      <td>15.281365</td>
      <td>390.776062</td>
      <td>9.692488</td>
      <td>4.746682</td>
      <td>6.506485</td>
      <td>0.099711</td>
      <td>92.275939</td>
      <td>6.335273</td>
      <td>1.873539</td>
      <td>14.858196</td>
      <td>14.765307</td>
    </tr>
    <tr>
      <th>50</th>
      <td>14.411360</td>
      <td>400.709529</td>
      <td>10.131253</td>
      <td>5.004242</td>
      <td>6.654920</td>
      <td>0.101800</td>
      <td>98.168148</td>
      <td>6.218915</td>
      <td>1.634005</td>
      <td>13.355937</td>
      <td>13.278674</td>
    </tr>
    <tr>
      <th>55</th>
      <td>14.318808</td>
      <td>399.768800</td>
      <td>10.228172</td>
      <td>5.041080</td>
      <td>6.747411</td>
      <td>0.102648</td>
      <td>101.487625</td>
      <td>6.262543</td>
      <td>1.491260</td>
      <td>13.443512</td>
      <td>13.338329</td>
    </tr>
    <tr>
      <th>60</th>
      <td>13.385452</td>
      <td>401.692525</td>
      <td>10.392598</td>
      <td>5.158017</td>
      <td>6.946388</td>
      <td>0.106268</td>
      <td>104.364017</td>
      <td>6.284225</td>
      <td>1.516656</td>
      <td>12.265478</td>
      <td>12.140989</td>
    </tr>
    <tr>
      <th>65</th>
      <td>12.218695</td>
      <td>405.332519</td>
      <td>10.394709</td>
      <td>5.200757</td>
      <td>7.219292</td>
      <td>0.107561</td>
      <td>107.592956</td>
      <td>6.185327</td>
      <td>1.474247</td>
      <td>11.857691</td>
      <td>11.739147</td>
    </tr>
    <tr>
      <th>70</th>
      <td>12.368106</td>
      <td>401.834982</td>
      <td>10.176582</td>
      <td>5.187901</td>
      <td>7.665344</td>
      <td>0.106185</td>
      <td>112.045559</td>
      <td>6.146259</td>
      <td>1.526773</td>
      <td>12.153599</td>
      <td>12.109731</td>
    </tr>
    <tr>
      <th>75</th>
      <td>12.819165</td>
      <td>400.822908</td>
      <td>9.994955</td>
      <td>5.147474</td>
      <td>7.721320</td>
      <td>0.105180</td>
      <td>114.239063</td>
      <td>6.185450</td>
      <td>1.811421</td>
      <td>12.629486</td>
      <td>12.553984</td>
    </tr>
    <tr>
      <th>80</th>
      <td>11.531005</td>
      <td>413.199842</td>
      <td>10.612055</td>
      <td>5.170810</td>
      <td>8.215602</td>
      <td>0.104268</td>
      <td>118.162274</td>
      <td>6.092149</td>
      <td>1.640275</td>
      <td>11.728975</td>
      <td>11.641238</td>
    </tr>
    <tr>
      <th>85</th>
      <td>10.792231</td>
      <td>417.811525</td>
      <td>10.706031</td>
      <td>5.098592</td>
      <td>8.544913</td>
      <td>0.105387</td>
      <td>120.335759</td>
      <td>6.025622</td>
      <td>1.580293</td>
      <td>11.615890</td>
      <td>11.493781</td>
    </tr>
    <tr>
      <th>90</th>
      <td>8.749526</td>
      <td>444.681594</td>
      <td>10.828235</td>
      <td>5.348343</td>
      <td>9.026387</td>
      <td>0.104949</td>
      <td>120.302833</td>
      <td>6.036756</td>
      <td>1.491731</td>
      <td>11.031919</td>
      <td>10.943086</td>
    </tr>
    <tr>
      <th>95</th>
      <td>8.064912</td>
      <td>448.424517</td>
      <td>10.880924</td>
      <td>5.497016</td>
      <td>9.101071</td>
      <td>0.107990</td>
      <td>122.213035</td>
      <td>5.973376</td>
      <td>1.389686</td>
      <td>9.914468</td>
      <td>9.862255</td>
    </tr>
    <tr>
      <th>100</th>
      <td>7.643970</td>
      <td>449.625154</td>
      <td>10.789731</td>
      <td>5.595887</td>
      <td>10.217116</td>
      <td>0.104333</td>
      <td>124.862947</td>
      <td>5.963903</td>
      <td>1.472829</td>
      <td>9.214315</td>
      <td>9.191514</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong>특성별 변화 선그래프</strong></p>
<p>클로로필-a 수치가 지정된 기준값 이상 2주동안 지속될 때 각 특성별 평균값의 변화를 선 그래프로 그리면 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">axes</span> <span class="o">=</span> <span class="n">day_quartile_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">subplots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>

<span class="c1"># 범례 위치 지정</span>
<span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/e966c03c9cf05540f30e224431bf9bb76ef5deab8e6ae1e2194488530658af0a.png" src="_images/e966c03c9cf05540f30e224431bf9bb76ef5deab8e6ae1e2194488530658af0a.png" />
</div>
</div>
<p><strong>특성 변화 분석</strong></p>
<p>특성별 수치 변동의 사분위수는 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">day_quartile_df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Temp</th>
      <th>EC</th>
      <th>DO</th>
      <th>TOC</th>
      <th>TN</th>
      <th>TP</th>
      <th>Chl-a</th>
      <th>Upstream</th>
      <th>Downstream</th>
      <th>Inflow</th>
      <th>D-Flow</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>19.000000</td>
      <td>19.000000</td>
      <td>19.000000</td>
      <td>19.000000</td>
      <td>19.000000</td>
      <td>19.000000</td>
      <td>19.000000</td>
      <td>19.000000</td>
      <td>19.000000</td>
      <td>19.000000</td>
      <td>19.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>13.588882</td>
      <td>399.835034</td>
      <td>9.729698</td>
      <td>4.982152</td>
      <td>7.180502</td>
      <td>0.106819</td>
      <td>97.812392</td>
      <td>6.313163</td>
      <td>1.828439</td>
      <td>13.997668</td>
      <td>13.884025</td>
    </tr>
    <tr>
      <th>std</th>
      <td>3.152113</td>
      <td>26.171127</td>
      <td>1.041162</td>
      <td>0.322009</td>
      <td>1.315301</td>
      <td>0.004596</td>
      <td>20.854389</td>
      <td>0.263735</td>
      <td>0.376553</td>
      <td>3.065926</td>
      <td>3.027311</td>
    </tr>
    <tr>
      <th>min</th>
      <td>7.643970</td>
      <td>359.108395</td>
      <td>7.453648</td>
      <td>4.609364</td>
      <td>5.636368</td>
      <td>0.099711</td>
      <td>60.652574</td>
      <td>5.963903</td>
      <td>1.389686</td>
      <td>9.214315</td>
      <td>9.191514</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>11.874850</td>
      <td>379.110763</td>
      <td>9.098732</td>
      <td>4.648847</td>
      <td>6.093892</td>
      <td>0.104300</td>
      <td>82.480466</td>
      <td>6.119204</td>
      <td>1.504193</td>
      <td>11.793333</td>
      <td>11.690192</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>14.318808</td>
      <td>400.709529</td>
      <td>10.131253</td>
      <td>5.041080</td>
      <td>6.747411</td>
      <td>0.105522</td>
      <td>101.487625</td>
      <td>6.262543</td>
      <td>1.640275</td>
      <td>13.355937</td>
      <td>13.278674</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>16.195778</td>
      <td>409.266180</td>
      <td>10.503382</td>
      <td>5.179356</td>
      <td>7.968461</td>
      <td>0.108533</td>
      <td>116.200669</td>
      <td>6.489801</td>
      <td>2.125719</td>
      <td>16.652426</td>
      <td>16.502571</td>
    </tr>
    <tr>
      <th>max</th>
      <td>17.947644</td>
      <td>449.625154</td>
      <td>10.880924</td>
      <td>5.595887</td>
      <td>10.217116</td>
      <td>0.118779</td>
      <td>124.862947</td>
      <td>6.800400</td>
      <td>2.535053</td>
      <td>20.221653</td>
      <td>20.074640</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>아래 표는 특성별 수치 변동을 요약한다.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Features</p></th>
<th class="head text-left"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>Temp</p></td>
<td class="text-left"><p>높은 Chl-a가 오래 지속될 수록 평균 수온이 계속 떨어짐. 이유는 동절기에 방류량이 매우 적어서 Chl-a 수치가 높게 유지되기 때문으로 판단됨.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>EC</p></td>
<td class="text-left"><p>큰 변화 없음. std=26.17가 mean=399.83의 6.5% 수준. 하지만 높은 Chl-a가 오래 지속될 수록 높아짐. 강우량과 연관되어 있는 것으로 알려짐. (Kang et al, 2019)</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>DO</p></td>
<td class="text-left"><p>큰 변화 없음. std=1.04가 mean=9.73의 10.7% 수준. 하지만 높은 Chl-a가 오래 지속될 수록 높아짐. 이유는 불명확함. 하지만 별로 중요해 보이지 않음. 이유는 호소수 수질환경기준에 따르면 DO 농도는 매우 좋음이 유지되기 때문임.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>TOC</p></td>
<td class="text-left"><p>거의 변화 없음. std=0.32가 mean=4.98의 4.1% 수준. 하지만 높은 Chl-a가 오래 지속될 수록 조금 높아지는 경향 보임. 하지만 별로 중요해 보이지 않음. 이유는 호소수 수질환경기준에 따르면 TOC 농도는 보통 수준이 유지되기 때문임.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>TN</p></td>
<td class="text-left"><p>min=5.64, max=10.22 정도. 높은 Chl-a가 오래 지속될 수록 TN이 두 배정도 높아짐. 하지만 별로 중요해 보이지 않음. 이유는 호소수 수질환경기준에 따르면 TN 농도는 매우 나쁨보다 훨씬 나쁜 수준이 유지되기 때문임.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>TP</p></td>
<td class="text-left"><p>거의 변화 없음. std=0.0045가 mean=0.1068의 4.3% 수준. 이유는 총인 처리시설 때문([Seo et al., 2018] 참고). 하지만 높은 Chl-a가 오래 지속될 수록 조금 낮아지는 경향 보임. 하지만 별로 중요해 보이지 않음. 이유는 호소수 수질환경기준에 따르면 TP 농도는 약간 나쁨 수준이 유지되기 때문임.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Chl-a</p></td>
<td class="text-left"><p>max=124.86, min=60.65 정도. 높은 Chl-a가 오래 지속될 수록 평균 수온이 계속 떨어짐. 이유는 동절기에 방류량이 매우 적어서 Chl-a 수치가 높게 유지되기 때문으로 판단됨.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Upstream</p></td>
<td class="text-left"><p>거의 변화 없음. std=0.26가 mean=6.31의 4.2% 수준. 하지만 높은 Chl-a가 오래 지속될 수록 조금 낮아지는 경향 보임. 상류 높이 최대한 동일하게 유지하기 때문. 또한 수온 또한 낮아지기에 동절기 유입량이 적기 때문으로 판단됨.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Downstream</p></td>
<td class="text-left"><p>거의 변화 없음. std=0.38가 mean=1.83의 4.2% 수준. 하지만 높은 Chl-a가 오래 지속될 수록 조금 낮아지는 경향 보임. 수온 또한 낮아지기에 동절기 유입량이 적기 때문으로 판단됨.</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Inflow</p></td>
<td class="text-left"><p>max=20.24, min=9.21 정도. 높은 Chl-a가 오래 지속될 수록 유입량이 절반 이하로 줄어듦. 수온 또한 낮아지기에 동절기 유입량이 적기 때문으로 판단됨.</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>Discharge</p></td>
<td class="text-left"><p>max=20.08, min=9.19 정도. 높은 Chl-a가 오래 지속될 수록 유입량이 절반 이하로 줄어듦. 수온 또한 낮아지기에 동절기 유입량이 적기 때문으로 판단됨.</p></td>
</tr>
</tbody>
</table>
</div>
<p>핵심은 다음과 같다.</p>
<ul class="simple">
<li><p>Temp: 높은 Chl-a가 오래 지속될 수록 평균 수온이 계속 떨어짐. 이유는 동절기에 방류량이 매우 적어서 Chl-a 수치가 높게 유지되기 때문으로 판단됨.</p></li>
<li><p>EC, DO, TOC, Upstream, Downstream 등의 수치 변동은 크지 않음.</p></li>
<li><p>TN: 클로로필-a 값이 높게 오래 지속될 수록 높아짐. 하지만 별로 중요해 보이지 않음. 이유는 호소수 수질환경기준에 따르면 TN 농도는 매우 나쁨보다 훨씬 나쁜 수준이 유지되기 때문임.</p></li>
<li><p>TP: 거의 변화 없음. 이유는 총인 처리시설 때문임. 그리고 별로 중요해 보이지 않음. 이유는 호소수 수질환경기준에 따르면 TP 농도는 약간 나쁨 수준이 유지되기 때문임.</p></li>
<li><p>Inflow와 Discharge: 거의 동일하게 변함. 하지만 방류량이 클로로필-a의 농도에 보다 많은 영향을 준다는 기존 연구에 따라 Discharge에 집중함.</p></li>
</ul>
<p><strong>N/P 비율</strong></p>
<p>[Shin et al., 2003; Reynolds, 1984]에 따르면 N/P 비율이 낮아질 수록, 즉 인(Phosphorus)의 유입이
늘어날 수록 남조류의 출현시기가 빨라지고 우점기간이 늘어나서 결국 클로로필-a의 농도가 빠르게 올라간다.
따라서 TN/TP의 비율의 변화를 살펴보는 것도 의미있다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">day_quartile_df</span><span class="p">[</span><span class="s1">&#39;TN/TP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">day_quartile_df</span><span class="p">[</span><span class="s1">&#39;TN&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">day_quartile_df</span><span class="p">[</span><span class="s1">&#39;TP&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">day_quartile_df</span><span class="p">[</span><span class="s1">&#39;TN/TP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    19.000000
mean     67.517198
std      13.500368
min      47.452671
25%      56.810049
50%      65.372542
75%      76.101975
max      97.928409
Name: TN/TP, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>TN/TP의 min=47.45에서 max=97.93 정도로 변한다.
아래 그래프에서 볼 수 있듯이 클로로필-a의 수치가 2주 이상 높게 유지될 수록
TN/TP가 증가한다.
이는 앞서 언급한 두 논문에서의 설명과 상반되는 결과이다.
[Seo et al., 2018]에서 이미 영산간 보 구간의 조류발생 패턴은 일반적으로 알려진 N/P 비율에 의한 것과는
다른 수 환경 요인에 의해 결정되는 것 같다고 추론 하였다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">axes</span> <span class="o">=</span> <span class="n">day_quartile_df</span><span class="p">[</span><span class="s1">&#39;TN/TP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">subplots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">))</span>

<span class="c1"># 범례 위치 지정</span>
<span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/51ffd7f82d2eadd5d0eda1e979d5e98abe92d476041a2371e6c1046fd0a99cda.png" src="_images/51ffd7f82d2eadd5d0eda1e979d5e98abe92d476041a2371e6c1046fd0a99cda.png" />
</div>
</div>
</section>
<section id="id14">
<h3><span class="section-number">3.6.2. </span>수온, 방류량, 클로로필-a 의 관계<a class="headerlink" href="#id14" title="Link to this heading">#</a></h3>
<p>아래 그래프는 클로로필-a의 수치가 일정 기준값보다 높게 2주 이상 유지될 때의 수온과 방류량의 변화만 따로 살펴본다. 클로로필-a의 기준값이 높아질수록 수온과 방류량의 평균값이 동반하락함을 보여준다. [Shin et al, 2003]에 따르면 강수량과 유량을 중심으로 하는 물리적 수문요인이 수 환경의 변화에 주는 영향이 매우 중요하다. 한국의 동절기에는 강우량이 매우 적기에 이는 결국 유량의 중요도가 보다 높아짐을 의미한다. 따라서 한국의 동절기에 유량이 매우 적어지면 수온이 상대적으로 매우 낮음에도 불구하고 클로로필-a의 수치가 높아지는 주요 원인이라고 판단된다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">day_quartile_df</span><span class="p">[[</span><span class="s1">&#39;Temp&#39;</span><span class="p">,</span> <span class="s1">&#39;D-Flow&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;index&#39;</span><span class="p">:</span><span class="s1">&#39;Chl-a&#39;</span><span class="p">})</span>
<span class="n">x_column</span> <span class="o">=</span> <span class="s1">&#39;Chl-a&#39;</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;D-Flow&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Temp&#39;</span><span class="p">]]</span>

<span class="n">cmap</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colormaps</span><span class="p">[</span><span class="s1">&#39;tab10&#39;</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">axes</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="p">]</span>
<span class="n">handles</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)):</span>
    <span class="n">twin</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">twin</span><span class="p">)</span>
    <span class="n">twin</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="s2">&quot;axes&quot;</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">i</span><span class="o">/</span><span class="mi">10</span><span class="p">))</span>

<span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">columns</span><span class="p">):</span>
    <span class="n">ylabel</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">p</span><span class="p">,</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">x_column</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">label</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="n">cmap</span><span class="p">(</span><span class="n">j</span><span class="p">)[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">ylabel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">sub_col</span> <span class="ow">in</span> <span class="n">col</span><span class="p">:</span>
            <span class="n">p</span><span class="p">,</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">x_column</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">sub_col</span><span class="p">],</span> <span class="n">label</span> <span class="o">=</span> <span class="n">sub_col</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">cmap</span><span class="p">(</span><span class="n">j</span><span class="p">)[:</span><span class="mi">3</span><span class="p">])</span>
            <span class="n">ylabel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sub_col</span><span class="p">)</span>
            <span class="n">handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># axes[i].set_ylabel(&#39;, &#39;.join(ylabel))</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;D-Flow ($\mathdefault</span><span class="si">{m}</span><span class="s1">^3/\mathdefault</span><span class="si">{s}</span><span class="s1">$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Temp ($</span><span class="si">{}</span><span class="s1">^\circ\! \mathdefault</span><span class="si">{C}</span><span class="s1">$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

    <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">21</span><span class="p">)</span>


<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span> <span class="o">=</span> <span class="n">handles</span><span class="p">,</span> <span class="n">frameon</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">105</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Chl-a ($\mathdefault</span><span class="si">{mg}</span><span class="s1">/\mathdefault</span><span class="si">{m}</span><span class="s1">^3$)&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="n">save_fig</span><span class="p">(</span><span class="s1">&#39;figure7c&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_17972/2512521663.py:9: UserWarning: The figure layout has changed to tight
  plt.tight_layout()
</pre></div>
</div>
<img alt="_images/9e687d79b09110f5a3b4d01948bbbc154bbaf54d419ca481987f4bdbe4ff4f0e.png" src="_images/9e687d79b09110f5a3b4d01948bbbc154bbaf54d419ca481987f4bdbe4ff4f0e.png" />
</div>
</div>
</section>
</section>
<section id="id15">
<h2><span class="section-number">3.7. </span>계절별 방류량에 따른 클로로필-a의 변화<a class="headerlink" href="#id15" title="Link to this heading">#</a></h2>
<p>방류량이 일정 기간동안 특정 구간에 머무를 때 클로로필-a의 변화를 살펴본다.
방류량 구간 기준점을 정하기 위해 먼저 사분위수와 백분위수를 확인한다.</p>
<ul class="simple">
<li><p>승촌보 방류량 사분위수</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_df_daily</span><span class="p">[</span><span class="s1">&#39;D-Flow&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">:]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>min       0.000000
25%      11.475920
50%      16.495660
75%      25.999184
max    3262.507857
Name: D-Flow, dtype: float64
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>승촌보 방류량 백분위수: 80%, 85%, 90%, 95%에 해당하는 방류량 수치</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">scb_df_daily</span><span class="p">[</span><span class="s1">&#39;D-Flow&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.80</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.80    29.062653
0.85    34.992448
0.90    47.773958
0.95    88.911385
Name: D-Flow, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>이를 바탕으로 방류량 구간의 기준점을 다음과 같이 정한다.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">11.5</span><span class="p">,</span> <span class="mf">16.5</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>min_level_fordays() 함수</strong></p>
<p>주어진 데이터셋 <code class="docutils literal notranslate"><span class="pre">df</span></code>를 대상으로, <code class="docutils literal notranslate"><span class="pre">feature</span></code> 특성을 기준으로 특성값이
<code class="docutils literal notranslate"><span class="pre">bins</span></code> 구간에 <code class="docutils literal notranslate"><span class="pre">days</span></code> 일동안 유지될 때의 온도와 클로로필-a의 <code class="docutils literal notranslate"><span class="pre">quartile</span></code> 변화를 반환한다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">df</span></code>: 데이터셋 데이터프레임</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">feature='D-Flow'</span></code>: 대상 특성. 기본값은 방류량.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">quartile='mean'</span></code>: 특성별 사분위수 구하기. 기본값은 평균값.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">days=1</span></code>: 대상 특성값의 구간 지속 기간. 기본값은 1일.</p></li>
<li><p><code class="docutils literal notranslate"> <span class="pre">bins=[0,</span> <span class="pre">11.5,</span> <span class="pre">16.5,</span> <span class="pre">26,</span> <span class="pre">50,</span> <span class="pre">70,</span> <span class="pre">90]</span></code>: 대상 특성값의 구간 구분 기준. 기본값은 방류량 구간 구분.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">targets=None</span></code>: 보여주고자 하는 변화 대상 특성들의 리스트 지정. 기본값은 <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">min_level_fordays</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">feature</span><span class="o">=</span><span class="s1">&#39;D-Flow&#39;</span><span class="p">,</span> <span class="n">quartile</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>  <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">11.5</span><span class="p">,</span> <span class="mf">16.5</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="n">targets</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

    <span class="n">day_quartile_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bins</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="c1"># feature가 지정된 구간에서 days 일동안 유지되는 날짜만 대상</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">days</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">bins</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">days</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">bins</span><span class="p">[</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
        <span class="n">day_quartile</span> <span class="o">=</span> <span class="n">desc</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">quartile</span><span class="p">]</span>
        
        <span class="c1"># feature 특성값은 언제나 mean 선택</span>
        <span class="c1"># day_feature_mean = desc.loc[&#39;mean&#39;][feature]</span>
        <span class="c1"># day_quartile[feature] = day_feature_mean</span>

        <span class="n">day_quartile_dict</span><span class="p">[</span><span class="n">bins</span><span class="p">[</span><span class="n">idx</span><span class="p">]]</span> <span class="o">=</span> <span class="n">day_quartile</span>

    <span class="c1"># 마지막 구간은 최대값 이상을 대상으로 함.</span>
    <span class="n">day_quartile_dict</span><span class="p">[</span><span class="n">bins</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">days</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">bins</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">quartile</span><span class="p">]</span>
    <span class="n">day_quartile_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">day_quartile_dict</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>

    <span class="c1"># 지정된 특성만 선택해서 반환</span>
    <span class="k">if</span> <span class="n">targets</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">day_quartile_df</span><span class="p">[</span><span class="n">targets</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">day_quartile_df</span>
</pre></div>
</div>
</div>
</div>
<section id="id16">
<h3><span class="section-number">3.7.1. </span>계절별 변화<a class="headerlink" href="#id16" title="Link to this heading">#</a></h3>
<p><strong>계절 데이터셋</strong></p>
<p>클로로필-a의 농도가 방류량과 함께 수온에 의존하는 것으로 판단된다.
따라서 계절별로 방류량을 기준으로 클로로필-a의 변화를 살펴본다.
아래 코드는 계절별 데이터셋을 지정한다.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>계절</p></th>
<th class="head text-center"><p>기간</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>봄</p></td>
<td class="text-center"><p>3월, 4월, 5월</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>여름</p></td>
<td class="text-center"><p>6월, 7월, 8월</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>가을</p></td>
<td class="text-center"><p>9월, 10월, 11월</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>겨울</p></td>
<td class="text-center"><p>12월, 1월, 2월</p></td>
</tr>
</tbody>
</table>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">spring_scb_df_daily</span> <span class="o">=</span> <span class="n">scb_df_daily</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">scb_df_daily</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])]</span>
<span class="n">summer_scb_df_daily</span> <span class="o">=</span> <span class="n">scb_df_daily</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">scb_df_daily</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">])]</span>
<span class="n">fall_scb_df_daily</span> <span class="o">=</span> <span class="n">scb_df_daily</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">scb_df_daily</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">])]</span>
<span class="n">winter_scb_df_daily</span> <span class="o">=</span> <span class="n">scb_df_daily</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">scb_df_daily</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])]</span>
</pre></div>
</div>
</div>
</div>
<p><strong>seasonal_min_level_fordays() 함수</strong></p>
<p>계절별로 <code class="docutils literal notranslate"><span class="pre">days</span></code>일 동안 방류량이 일정하게 유지될 때의 <code class="docutils literal notranslate"><span class="pre">targets</span></code> 특성 변화를 담은 데이터프레임을 생성한다.
기본값으로 방류량이 일정하게 1일 동안 유지될 때의 클로로필-a의 농도를 계절별로 계산한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">seasonal_min_level_fordays</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">targets</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Chl-a&#39;</span><span class="p">]):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">season</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;spring&#39;</span><span class="p">,</span> <span class="s1">&#39;summer&#39;</span><span class="p">,</span> <span class="s1">&#39;fall&#39;</span><span class="p">,</span> <span class="s1">&#39;winter&#39;</span><span class="p">]:</span>
        <span class="n">df</span><span class="p">[</span><span class="n">season</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_level_fordays</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">season</span><span class="o">+</span><span class="s1">&#39;_scb_df_daily&#39;</span><span class="p">),</span> <span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">,</span> <span class="n">targets</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Chl-a&#39;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
</div>
</div>
<p><strong>방류량이 1일동안 일정 기준 이상 유지될 때의 클로로필-a 변화</strong></p>
<p>계절별로 초당 방류량의 평균값이 하룻동안 일정 구간에 머무를 때의 클로로필-a의 변화는 다음과 같다.
콜로로필-a 기준으로 보통의 수질을 유지하기 위한 초당 방류량은 대략적으로 다음과 같다.
호소수의 수질환경기준에서 클로로필-a의 농도는 20 <span class="math notranslate nohighlight">\(\text{mg}\)</span>/<span class="math notranslate nohighlight">\(\text{m}^3\)</span> 이하일 때 수질이 ‘보통’으로 판정된다.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>계절</p></th>
<th class="head text-center"><p>평균 방류량</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>봄</p></td>
<td class="text-center"><p>95</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>여름</p></td>
<td class="text-center"><p>85</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>가을</p></td>
<td class="text-center"><p>40</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>겨울</p></td>
<td class="text-center"><p>20</p></td>
</tr>
</tbody>
</table>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">days</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">seasonal_min_level_fordays</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="c1"># ax.set_xticks(range(0, 101, 10))</span>

<span class="c1"># 20 mg/m3 기준선 추가</span>
<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">20</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">xs</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="s1">&#39;r--&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;D-Flow ($\mathdefault</span><span class="si">{m}</span><span class="s1">^3/\mathdefault</span><span class="si">{s}</span><span class="s1">$)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Chl-a ($\mathdefault</span><span class="si">{mg}</span><span class="s1">/\mathdefault</span><span class="si">{m}</span><span class="s1">^3$)&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">105</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Spring&#39;</span><span class="p">,</span> <span class="s1">&#39;Summer&#39;</span><span class="p">,</span> <span class="s1">&#39;Fall&#39;</span><span class="p">,</span> <span class="s1">&#39;Winter&#39;</span><span class="p">])</span>


<span class="c1"># ax.set_title(f&#39;Seasonal Chl-a level for {days} day(s) depending on discharge&#39;)</span>

<span class="n">save_fig</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;figure-abstract&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/ca5ec825929196cafc88ab4c416fa73222fee0d442a9252e0c3a10adc7e92df1.png" src="_images/ca5ec825929196cafc88ab4c416fa73222fee0d442a9252e0c3a10adc7e92df1.png" />
</div>
</div>
<p><strong>방류량이 2일동안 일정 기준 이상 유지될 때의 클로로필-a 변화</strong></p>
<p>계절별로 초당 방류량의 평균값이 이틀 연속 일정 구간에 머무를 때의 클로로필-a의 변화는 다음과 같다.
콜로로필-a 기준으로 보통의 수질을 유지하기 위한 초당 방류량은 대략적으로 다음과 같다.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>계절</p></th>
<th class="head text-center"><p>평균 방류량</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>봄</p></td>
<td class="text-center"><p>30</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>여름</p></td>
<td class="text-center"><p>60</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>가을</p></td>
<td class="text-center"><p>35</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>겨울</p></td>
<td class="text-center"><p>15</p></td>
</tr>
</tbody>
</table>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">days</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">seasonal_min_level_fordays</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="c1"># ax.set_xticks(range(0, 101, 10))</span>

<span class="c1"># 20 mg/m3 기준선 추가</span>
<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">20</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">xs</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="s1">&#39;r--&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;D-Flow ($\mathdefault</span><span class="si">{m}</span><span class="s1">^3/\mathdefault</span><span class="si">{s}</span><span class="s1">$)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Chl-a ($\mathdefault</span><span class="si">{mg}</span><span class="s1">/\mathdefault</span><span class="si">{m}</span><span class="s1">^3$)&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">105</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Spring&#39;</span><span class="p">,</span> <span class="s1">&#39;Summer&#39;</span><span class="p">,</span> <span class="s1">&#39;Fall&#39;</span><span class="p">,</span> <span class="s1">&#39;Winter&#39;</span><span class="p">])</span>

<span class="c1"># ax.set_title(f&#39;Seasonal Chl-a level for {days} day(s) depending on discharge&#39;)</span>

<span class="n">save_fig</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;seasonal_chla_</span><span class="si">{</span><span class="n">days</span><span class="si">}</span><span class="s2">d_discharge&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/9932f1f62a8dca28600b698b9c28c597f839ba5c6bd039ce9368fec27d4ad008.png" src="_images/9932f1f62a8dca28600b698b9c28c597f839ba5c6bd039ce9368fec27d4ad008.png" />
</div>
</div>
<p>비교를 위해 하나의 그래프로 그린다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">days</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span><span class="c1">#, sharey=True)</span>
<span class="c1"># fig.supxlabel(&#39;Discharge flow rate ($\mathdefault{m}^3/\mathdefault{s}$)&#39;, y=-0.05)</span>
<span class="c1"># fig.supylabel(&#39;Chl-a ($\mathdefault{mg}/\mathdefault{m}^3$)&#39;, x=0.08)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">abcd</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;(a)&#39;</span><span class="p">,</span> <span class="s1">&#39;(b)&#39;</span><span class="p">]</span>

<span class="n">yticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">seasonal_min_level_fordays</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>

    <span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
    <span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">20</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">xs</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="s1">&#39;r--&#39;</span><span class="p">)</span>


    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">105</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Spring&#39;</span><span class="p">,</span> <span class="s1">&#39;Summer&#39;</span><span class="p">,</span> <span class="s1">&#39;Fall&#39;</span><span class="p">,</span> <span class="s1">&#39;Winter&#39;</span><span class="p">])</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;D-Flow ($\mathdefault</span><span class="si">{m}</span><span class="s1">^3/\mathdefault</span><span class="si">{s}</span><span class="s1">$)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Chl-a ($\mathdefault</span><span class="si">{mg}</span><span class="s1">/\mathdefault</span><span class="si">{m}</span><span class="s1">^3$)&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.08</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">abcd</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.03</span><span class="p">,</span> <span class="n">x</span><span class="o">=-</span><span class="mf">0.025</span><span class="p">)</span>
    <span class="c1"># ax.set_title(f&#39;{abcd[i]} Chl-a level for {days[i]} day(s)&#39;, y=1.03)</span>

<span class="n">save_fig</span><span class="p">(</span><span class="s1">&#39;figure8a&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/00d7648c20539c1ce26142d58684144e939d5df356319c0ae4d2a4f33e218be4.png" src="_images/00d7648c20539c1ce26142d58684144e939d5df356319c0ae4d2a4f33e218be4.png" />
</div>
</div>
</section>
</section>
<section id="id17">
<h2><span class="section-number">3.8. </span>수온과 방류량에 따른 클로로필-a 수치 변화<a class="headerlink" href="#id17" title="Link to this heading">#</a></h2>
<p>수온과 방류량의 구간별 클로로필-a의 수치 변화를 추적한다.</p>
<ul class="simple">
<li><p>수온 구간</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">temp_bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>방류량 구간</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">discharge_bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">11.5</span><span class="p">,</span> <span class="mf">16.5</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>지정된 수온 구간과 방류량 구간이 <code class="docutils literal notranslate"><span class="pre">days</span></code> 이상 지속되었을 때 클로로필-a 수치 평균값으로 구성된 데이터프레임 생성 함수</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">discharge_temp_corr</span><span class="p">(</span><span class="n">discharge_bins</span><span class="p">,</span> <span class="n">temp_bins</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;Chl-a&#39;</span><span class="p">):</span>
    <span class="n">target_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">temp_bins</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">scb_df_daily</span><span class="p">[</span><span class="s1">&#39;Temp&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">temp_bins</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">scb_df_daily</span><span class="p">[</span><span class="s1">&#39;Temp&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">temp_bins</span><span class="p">[</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">temp_scb_daily</span> <span class="o">=</span> <span class="n">scb_df_daily</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>

        <span class="n">quartile_level</span> <span class="o">=</span> <span class="n">min_level_fordays</span><span class="p">(</span><span class="n">temp_scb_daily</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">discharge_bins</span><span class="p">)</span>
        
        <span class="c1"># 온도 구간 표시</span>
        <span class="n">target_series</span> <span class="o">=</span> <span class="n">quartile_level</span><span class="p">[</span><span class="n">target</span><span class="p">]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">temp_bins</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        
        <span class="n">target_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">target_df</span><span class="p">,</span> <span class="n">target_series</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># 마지막 구간 지정</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">scb_df_daily</span><span class="p">[</span><span class="s1">&#39;Temp&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">temp_bins</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">temp_scb_daily</span> <span class="o">=</span> <span class="n">scb_df_daily</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>

    <span class="n">quartile_level</span> <span class="o">=</span> <span class="n">min_level_fordays</span><span class="p">(</span><span class="n">temp_scb_daily</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">discharge_bins</span><span class="p">)</span>

    <span class="n">target_series</span> <span class="o">=</span> <span class="n">quartile_level</span><span class="p">[</span><span class="n">target</span><span class="p">]</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">temp_bins</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">target_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">target_df</span><span class="p">,</span> <span class="n">target_series</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">target_df</span>
</pre></div>
</div>
</div>
</div>
<p><strong>방류량이 1일동안 일정 기준 이상 유지될 때의 클로로필-a 변화</strong></p>
<p>수온 구간별로 초당 방류량의 평균값이 이틀 연속 일정 구간에 머무를 때의 클로로필-a의 변화는 다음과 같다.
방류량이 20 이상일 때 클로로필-a의 농도가 20에서 30 사이 구간에서 진동을 많이 한다.
하루 정도 방류량을 조절하는 것으로는 클로로필-a의 농도를 제한하는 일이 어려움을 반영하는 것으로 보인다.
온도와 방류량 이외에 다른 요소가 클로로필-a의 농도에 영향을 줄 수도 있다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">days</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">discharge_temp_corr</span><span class="p">(</span><span class="n">discharge_bins</span><span class="p">,</span> <span class="n">temp_bins</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;Chl-a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="c1"># 20 mg/m3 기준선 추가</span>
<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">20</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">xs</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="s1">&#39;r--&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Discharge flow rate ($\mathdefault</span><span class="si">{m}</span><span class="s1">^3/\mathdefault</span><span class="si">{s}</span><span class="s1">$)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Chl-a ($\mathdefault</span><span class="si">{mg}</span><span class="s1">/\mathdefault</span><span class="si">{m}</span><span class="s1">^3$)&#39;</span><span class="p">)</span>
<span class="c1"># ax.set_title(f&#39;Chl-a level for {days} day(s) depending on discharge and temperature&#39;)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">temp_bins</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="n">temp_bins</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1"> $^\circ\!$C&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">temp_bins</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;&gt; </span><span class="si">{</span><span class="n">temp_bins</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1"> $^\circ\!$C&#39;</span><span class="p">])</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">105</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span>

<span class="n">save_fig</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;thermal_chla_</span><span class="si">{</span><span class="n">days</span><span class="si">}</span><span class="s2">d_discharge&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/2640cdb6d661152800d489e9b801e91c69ea1395f85a54cd0d4cd625ae071c78.png" src="_images/2640cdb6d661152800d489e9b801e91c69ea1395f85a54cd0d4cd625ae071c78.png" />
</div>
</div>
<p><strong>방류량이 2일동안 일정 기준 이상 유지될 때의 클로로필-a 변화</strong></p>
<p>수온 구간별로 초당 방류량의 평균값이 이틀 연속 일정 구간에 머무를 때의 클로로필-a의 변화는 다음과 같다.
방류량이 어느 정도 이상 이틀 정도 지속되면 클로로필-a의 농도가 상당히 내려간다.
콜로로필-a 기준으로 보통의 수질을 유지하기 위한 초당 방류량은 대략적으로 다음과 같다.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>평균 수온</p></th>
<th class="head text-center"><p>평균 방류량</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>0-10</p></td>
<td class="text-center"><p>15</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>10-15</p></td>
<td class="text-center"><p>25</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>15-20</p></td>
<td class="text-center"><p>25</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>20-25</p></td>
<td class="text-center"><p>35</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>25-30</p></td>
<td class="text-center"><p>60</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>30-</p></td>
<td class="text-center"><p>unkown</p></td>
</tr>
</tbody>
</table>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">days</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">discharge_temp_corr</span><span class="p">(</span><span class="n">discharge_bins</span><span class="p">,</span> <span class="n">temp_bins</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;Chl-a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="c1"># 20 mg/m3 기준선 추가</span>
<span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">20</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">xs</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="s1">&#39;r--&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Discharge flow rate ($\mathdefault</span><span class="si">{m}</span><span class="s1">^3/\mathdefault</span><span class="si">{s}</span><span class="s1">$)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Chl-a ($\mathdefault</span><span class="si">{mg}</span><span class="s1">/\mathdefault</span><span class="si">{m}</span><span class="s1">^3$)&#39;</span><span class="p">)</span>
<span class="c1"># ax.set_title(f&#39;Chl-a level for {days} day(s) depending on discharge and temperature&#39;)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%5s</span><span class="s1"> $^\circ\!$C&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">temp_bins</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">temp_bins</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span> <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="mi">0</span> \
           <span class="k">else</span> <span class="s1">&#39;</span><span class="si">%5s</span><span class="s1"> $^\circ\!$C&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp_bins</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">temp_bins</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">temp_bins</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> \
            <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;</span><span class="si">%5s</span><span class="s1"> $^\circ\!$C&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;   &gt; &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">temp_bins</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))])</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">105</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span>


<span class="n">save_fig</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;thermal_chla_</span><span class="si">{</span><span class="n">days</span><span class="si">}</span><span class="s2">d_discharge&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/4d2e3388513cc045e2e14afbca7b35063ba8f7a5fb9c060881262723a0e2bd65.png" src="_images/4d2e3388513cc045e2e14afbca7b35063ba8f7a5fb9c060881262723a0e2bd65.png" />
</div>
</div>
<p>비교를 위해 하나의 그래프로 그린다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">temp_bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
<span class="n">discharge_bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">11.5</span><span class="p">,</span> <span class="mf">16.5</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">csfont</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fontname&#39;</span><span class="p">:</span><span class="s1">&#39;Times New Roman&#39;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">days</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
<span class="c1"># fig.supxlabel(&#39;Discharge flow rate ($\mathdefault{m}^3/\mathdefault{s}$)&#39;, y=-0.05)</span>
<span class="c1"># fig.supylabel(&#39;Chl-a ($\mathdefault{mg}/\mathdefault{m}^3$)&#39;, x=0.08)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">abcd</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;(a)&#39;</span><span class="p">,</span> <span class="s1">&#39;(b)&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">discharge_temp_corr</span><span class="p">(</span><span class="n">discharge_bins</span><span class="p">,</span> <span class="n">temp_bins</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;Chl-a&#39;</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

    <span class="c1"># 20 mg/m3 기준선 추가</span>
    <span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
    <span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">20</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">xs</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="s1">&#39;r--&#39;</span><span class="p">)</span>


    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">yticks</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;D-Flow ($\mathdefault</span><span class="si">{m}</span><span class="s1">^3/\mathdefault</span><span class="si">{s}</span><span class="s1">$)&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">csfont</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Chl-a ($\mathdefault</span><span class="si">{mg}</span><span class="s1">/\mathdefault</span><span class="si">{m}</span><span class="s1">^3$)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">105</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">abcd</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.03</span><span class="p">,</span> <span class="n">x</span><span class="o">=-</span><span class="mf">0.025</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">temp_bins</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="n">temp_bins</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1"> $^\circ\!$C&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">temp_bins</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;&gt; </span><span class="si">{</span><span class="n">temp_bins</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1"> $^\circ\!$C&#39;</span><span class="p">])</span>
    
<span class="n">save_fig</span><span class="p">(</span><span class="s1">&#39;figure9a&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/9984e535d658d3083e6811089cde067afec4f979586d6f462cc022f918060f59.png" src="_images/9984e535d658d3083e6811089cde067afec4f979586d6f462cc022f918060f59.png" />
</div>
</div>
<section id="id18">
<h3><span class="section-number">3.8.1. </span>계절별 그래프와 수온별 그래프 비교<a class="headerlink" href="#id18" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">days</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span> 

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
<span class="c1"># fig.supxlabel(&#39;Discharge flow rate ($\mathdefault{m}^3/\mathdefault{s}$)&#39;, y=-0.05)</span>
<span class="c1"># fig.supylabel(&#39;Chl-a ($\mathdefault{mg}/\mathdefault{m}^3$)&#39;, x=0.08)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.35</span><span class="p">)</span>

<span class="n">abcd</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;(a)&#39;</span><span class="p">,</span> <span class="s1">&#39;(b)&#39;</span><span class="p">,</span> <span class="s1">&#39;(c)&#39;</span><span class="p">,</span> <span class="s1">&#39;(d)&#39;</span><span class="p">]</span>

<span class="n">yticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ax</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()):</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">seasonal_min_level_fordays</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">discharge_temp_corr</span><span class="p">(</span><span class="n">discharge_bins</span><span class="p">,</span> <span class="n">temp_bins</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="n">days</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;Chl-a&#39;</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

    <span class="c1"># 20 mg/m3 기준선 추가</span>
    <span class="n">xs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
    <span class="n">ys</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">20</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">xs</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="s1">&#39;r--&#39;</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">yticks</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;D-Flow ($\mathdefault</span><span class="si">{m}</span><span class="s1">^3/\mathdefault</span><span class="si">{s}</span><span class="s1">$)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Chl-a ($\mathdefault</span><span class="si">{mg}</span><span class="s1">/\mathdefault</span><span class="si">{m}</span><span class="s1">^3$)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">105</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">abcd</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">1.03</span><span class="p">,</span> <span class="n">x</span><span class="o">=-</span><span class="mf">0.025</span><span class="p">)</span>
    <span class="c1"># ax.set_title(f&#39;{abcd[i]} Chl-a level for {days[i]} day(s)&#39;, y=1.03)</span>

    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Spring&#39;</span><span class="p">,</span> <span class="s1">&#39;Summer&#39;</span><span class="p">,</span> <span class="s1">&#39;Fall&#39;</span><span class="p">,</span> <span class="s1">&#39;Winter&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">temp_bins</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="n">temp_bins</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1"> $^\circ\!$C&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">temp_bins</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;&gt; </span><span class="si">{</span><span class="n">temp_bins</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1"> $^\circ\!$C&#39;</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/de13daf0a320c18ce6939f3df5d489a3dddc19ae918ea08e8bb2910094ef4e02.png" src="_images/de13daf0a320c18ce6939f3df5d489a3dddc19ae918ea08e8bb2910094ef4e02.png" />
</div>
</div>
<p>이틀동안 수온 평균이 30도 이상인 경우 해당하는 데이터가 별로 없어서 초당 방류량 평균이 얼마이어야 수질이 보통이 될지는 확실하지 않지만
70 이상 되어야 할 것으로 추정된다.
이에 대한 근거는 아래 표에서 확인할 수 있다.</p>
<p>아래 표는 여름에 이틀동안 초당 방류량 평균이 일정 구간의 값을 유지할 때의 온도와 클로로필-a의 제3사분위수에 해당하는 값들을 포함한다.
평균 수온이 30도 이상인 경우 클로로필-a의 수치가 20 이하로 떨어지는 데이터는 없지만
평균 수온이 26도 정도이고 초당 방류량 평균이 60 이상일 때 클로로필-a의 제3사분위수가 22 정도이다.
반면에 수온이 26도 정도이고 방류량 평균이 80 이상일 때 클로로필-a의 제3사분위수가 6 정도로 떨어진다.
따라서 온도가 30 이상인 경우 최소 70 정도는 돼야 할 것으로 추정할 수 있다.</p>
<ul class="simple">
<li><p>중위수</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">min_level_fordays</span><span class="p">(</span><span class="n">summer_scb_df_daily</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">discharge_bins</span><span class="p">,</span> <span class="n">targets</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Temp&#39;</span><span class="p">,</span> <span class="s1">&#39;Chl-a&#39;</span><span class="p">],</span> <span class="n">quartile</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Temp</th>
      <th>Chl-a</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0.0</th>
      <td>29.738111</td>
      <td>80.521887</td>
    </tr>
    <tr>
      <th>11.5</th>
      <td>28.964279</td>
      <td>79.969933</td>
    </tr>
    <tr>
      <th>16.5</th>
      <td>27.822616</td>
      <td>55.317070</td>
    </tr>
    <tr>
      <th>26.0</th>
      <td>27.231176</td>
      <td>46.217398</td>
    </tr>
    <tr>
      <th>40.0</th>
      <td>26.100233</td>
      <td>30.503026</td>
    </tr>
    <tr>
      <th>50.0</th>
      <td>26.386111</td>
      <td>24.488194</td>
    </tr>
    <tr>
      <th>60.0</th>
      <td>25.758333</td>
      <td>21.285417</td>
    </tr>
    <tr>
      <th>70.0</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>80.0</th>
      <td>26.054167</td>
      <td>6.225000</td>
    </tr>
    <tr>
      <th>90.0</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>100.0</th>
      <td>24.741660</td>
      <td>5.604421</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>3사분위수</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">min_level_fordays</span><span class="p">(</span><span class="n">summer_scb_df_daily</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">discharge_bins</span><span class="p">,</span> <span class="n">targets</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Temp&#39;</span><span class="p">,</span> <span class="s1">&#39;Chl-a&#39;</span><span class="p">],</span> <span class="n">quartile</span><span class="o">=</span><span class="s1">&#39;75%&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Temp</th>
      <th>Chl-a</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0.0</th>
      <td>31.910417</td>
      <td>91.750000</td>
    </tr>
    <tr>
      <th>11.5</th>
      <td>32.164205</td>
      <td>89.134375</td>
    </tr>
    <tr>
      <th>16.5</th>
      <td>29.338706</td>
      <td>75.098641</td>
    </tr>
    <tr>
      <th>26.0</th>
      <td>29.341667</td>
      <td>62.880952</td>
    </tr>
    <tr>
      <th>40.0</th>
      <td>27.076042</td>
      <td>35.468977</td>
    </tr>
    <tr>
      <th>50.0</th>
      <td>26.762500</td>
      <td>32.605208</td>
    </tr>
    <tr>
      <th>60.0</th>
      <td>25.818750</td>
      <td>22.242708</td>
    </tr>
    <tr>
      <th>70.0</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>80.0</th>
      <td>26.054167</td>
      <td>6.225000</td>
    </tr>
    <tr>
      <th>90.0</th>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>100.0</th>
      <td>25.708333</td>
      <td>6.265217</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="meta_pdp.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">2. </span>바이오차 메타 데이터: PDP 분석</p>
      </div>
    </a>
    <a class="right-next"
       href="scb_seasonal_flow_chla_GB.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">4. </span>승촌보 데이터 분석: 방류량 중요도</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">3.1. 데이터 정보</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">3.2. 주요 내용</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">3.3. 필수 모듈 임포트</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">3.4. 승촌보 데이터 불러오기</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">3.4.1. 수질 데이터 불러오기</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">3.4.2. 승촌보 유량 데이터 추가</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">3.4.3. 연도별 유량 데이터 통합</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">3.4.4. 수질/유량 데이터 합병</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">3.4.5. 이상치 제거</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">3.5. 데이터셋 전처리</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">3.5.1. 1시간 단위로 정리된 데이터를 1일 단위로 변경</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">3.6. 호소수 클로로필-a 수질환경기준에 따른 방류량과 수온의 변화</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">3.6.1. 클로로필-a 농도 기준에 따른 특성들의 변화</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">3.6.2. 수온, 방류량, 클로로필-a 의 관계</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">3.7. 계절별 방류량에 따른 클로로필-a의 변화</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">3.7.1. 계절별 변화</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">3.8. 수온과 방류량에 따른 클로로필-a 수치 변화</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">3.8.1. 계절별 그래프와 수온별 그래프 비교</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By 코딩알지
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>